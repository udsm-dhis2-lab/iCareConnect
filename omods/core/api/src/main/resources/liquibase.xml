<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9
                  http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">

    <changeSet author="jesse-justin" id="create_item_table" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="item"/>
            </not>
        </preConditions>
        <comment>Creating openmrs item table</comment>
        <createTable tableName="item">
            <column autoIncrement="true" name="item_id" type="INTEGER">
                <constraints nullable="false" primaryKey="true" primaryKeyName="item_id_pk"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="unit" type="VARCHAR(32)"/>
            <column name="concept_id" type="INTEGER">
                <constraints nullable="true" unique="true" uniqueConstraintName="concept_id_uq"/>
            </column>
            <column name="drug_id" type="INTEGER">
                <constraints nullable="true" unique="true" uniqueConstraintName="drug_id_uq"/>
            </column>
            <column name="stockable" type="BOOLEAN"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="item"
                constraintName="item_changed_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="item"
                constraintName="item_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

    </changeSet>
    <changeSet author="jesse-justin" id="create_bl_discount_criteria" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="bl_discount_criteria"/>
            </not>
        </preConditions>
        <comment>Creating openmrs bl discount criteria table</comment>
        <createTable tableName="bl_discount_criteria">
            <column autoIncrement="true" name="discount_criteria_id" type="INTEGER">
                <constraints nullable="false" primaryKey="true" primaryKeyName="discount_criteria_id"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="name" type="TEXT"/>
            <column name="description" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="bl_discount_criteria"
                constraintName="creator_criteria_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>


        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="bl_discount_criteria"
                constraintName="changed_by_criteria_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

    </changeSet>

    <changeSet author="jesse-justin" id="create_bl_discount" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="bl_discount"/>
            </not>
        </preConditions>
        <comment>Creating openmrs bl discount table</comment>
        <createTable tableName="bl_discount">
            <column autoIncrement="true" name="discount_id" type="INTEGER">
                <constraints nullable="false" primaryKey="true" primaryKeyName="discount_id_pk"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="discount_criteria_id" type="INTEGER"/>
            <column name="attachment_id" type="INTEGER"/>
            <column name="remarks" type="TEXT"/>
            <column name="patient_id" type="INTEGER"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="bl_discount"
                constraintName="bl_discount_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="bl_discount"
                constraintName="bl_discount_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="discount_criteria_id"
                baseTableName="bl_discount"
                constraintName="discount_discount_criteria_discount_criteria_id_fk"
                referencedColumnNames="discount_criteria_id"
                referencedTableName="bl_discount_criteria"/>
    </changeSet>

    <changeSet author="jesse-justin" id="create_bl_invoice" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="bl_invoice"/>
            </not>
        </preConditions>
        <comment>Creating openmrs bl_invoice table</comment>
        <createTable tableName="bl_invoice">
            <column autoIncrement="true" name="invoice_id" type="INTEGER">
                <constraints nullable="false" primaryKey="true" primaryKeyName="invoice_id_pk"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="payment_mode_id" type="INTEGER">
                <constraints nullable="false"></constraints>
            </column>
            <column name="patient_id" type="INTEGER"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>


        <addForeignKeyConstraint
                baseColumnNames="payment_mode_id"
                baseTableName="bl_invoice"
                constraintName="bl_invoice_payment_mode_id_concept_concept_id_fk"
                referencedColumnNames="concept_id"
                referencedTableName="concept"/>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="bl_invoice"
                constraintName="bl_invoice_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="bl_invoice"
                constraintName="bl_invoice_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

    </changeSet>
    <changeSet id="create_bl_payment" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="bl_payment"/>
            </not>
        </preConditions>
        <comment>Creating openmrs bl_payment table</comment>
        <createTable tableName="bl_payment">
            <column name="payment_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="payment_id_pk" nullable="false"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="invoice_id" type="INTEGER"/>
            <column name="reference_number" type="TEXT"/>
            <column name="received_by" type="TEXT"/>
            <column name="payment_type_id" type="INTEGER"/>
        </createTable>
        <addForeignKeyConstraint
                baseTableName="bl_payment"
                baseColumnNames="invoice_id"
                constraintName="payment_bill_bill_id_fk"
                referencedTableName="bl_invoice"
                referencedColumnNames="invoice_id"/>
    </changeSet>
    <changeSet id="create_bl_payment_item" author="vincentminde" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="bl_payment_item"/>
            </not>
        </preConditions>
        <comment>Creating openmrs bl_invoice_item table</comment>
        <createTable tableName="bl_payment_item">
            <column name="order_id" type="INTEGER"/>
            <column name="item_id" type="INTEGER"/>
            <column name="amount" type="DOUBLE"/>
            <column name="payment_id" type="INTEGER" />
        </createTable>
        <addForeignKeyConstraint
                baseTableName="bl_payment_item"
                baseColumnNames="payment_id"
                constraintName="payment_item_bill_bill_id_fk"
                referencedTableName="bl_payment"
                referencedColumnNames="payment_id"/>
        <addForeignKeyConstraint
                baseTableName="bl_payment_item"
                baseColumnNames="item_id"
                constraintName="bl_payment_item_item_item_id_fk"
                referencedTableName="item"
                referencedColumnNames="item_id"/>

        <addPrimaryKey tableName="bl_payment_item" columnNames="payment_id,item_id,order_id"/>
    </changeSet>
    <changeSet id="create_bl_invoice_item" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="bl_invoice_item"/>
            </not>
        </preConditions>
        <comment>Creating openmrs bl_invoice_item table</comment>
        <createTable tableName="bl_invoice_item">
            <column name="order_id" type="INTEGER"/>
            <column name="invoice_id" type="INTEGER"/>
            <column name="item_id" type="INTEGER"/>
            <column name="quantity" type="INTEGER"/>
            <column name="price" type="DECIMAL"/>
        </createTable>
        <addForeignKeyConstraint
                baseTableName="bl_invoice_item"
                baseColumnNames="invoice_id"
                constraintName="bill_item_bill_bill_id_fk"
                referencedTableName="bl_invoice"
                referencedColumnNames="invoice_id"/>
        <addForeignKeyConstraint
                baseTableName="bl_invoice_item"
                baseColumnNames="item_id"
                constraintName="bl_item_item_item_id_fk"
                referencedTableName="item"
                referencedColumnNames="item_id"/>

        <addPrimaryKey tableName="bl_invoice_item" columnNames="invoice_id,item_id,order_id"/>
    </changeSet>

    <changeSet id="create_bl_discount_invoice_item" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="bl_discount_invoice_item"/>
            </not>
        </preConditions>
        <comment>Creating openmrs bl_discount_invoice_item table</comment>
        <createTable tableName="bl_discount_invoice_item">
            <column name="discount_id" type="INTEGER"/>
            <column name="invoice_id" type="INTEGER"/>
            <column name="item_id" type="INTEGER"/>
            <column name="amount" type="DOUBLE"/>
        </createTable>

        <addPrimaryKey
                columnNames="discount_id,invoice_id,item_id"
                constraintName="pk_discount_invoice_item_id"
                tableName="bl_discount_invoice_item"/>
        <addForeignKeyConstraint
                baseTableName="bl_discount_invoice_item"
                baseColumnNames="invoice_id"
                constraintName="discount_bill_item_bill_item_bill_id_fk"
                referencedTableName="bl_invoice_item"
                referencedColumnNames="invoice_id"/>
        <addForeignKeyConstraint
                baseTableName="bl_discount_invoice_item"
                baseColumnNames="item_id"
                constraintName="discount_bill_item_bill_item_item_id_fk"
                referencedTableName="item"
                referencedColumnNames="item_id"/>
        <addForeignKeyConstraint
                baseTableName="bl_discount_invoice_item"
                baseColumnNames="discount_id"
                constraintName="discount_bill_item_discount_discount_id_fk"
                referencedTableName="bl_discount"
                referencedColumnNames="discount_id"/>
    </changeSet>

    <changeSet id="create_bl_item_price" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="bl_item_price"/>
            </not>
        </preConditions>
        <comment>Creating openmrs bl_item_price table</comment>
        <createTable tableName="bl_item_price">
            <column name="item_id" type="INTEGER"/>
            <column name="payment_scheme_id" type="INTEGER"/>
            <column name="payment_type_id" type="INTEGER"/>
            <column name="price" type="DECIMAL"/>
            <column name="payable" type="DECIMAL"/>
        </createTable>
        <addPrimaryKey tableName="bl_item_price" columnNames="item_id,payment_scheme_id,payment_type_id"
                       constraintName="bl_item_price_id_pk"/>
        <addForeignKeyConstraint
                baseTableName="bl_item_price"
                baseColumnNames="item_id"
                constraintName="item_price_item_item_id_fk"
                referencedTableName="item"
                referencedColumnNames="item_id"/>
    </changeSet>

    <changeSet id="create_bl_invoice_item_payment" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="bl_invoice_item_payment"/>
            </not>
        </preConditions>
        <comment>Creating openmrs bl_invoice_item_payment table</comment>
        <createTable tableName="bl_invoice_item_payment">
            <column name="item_id" type="INTEGER"/>
            <column name="payment_id" type="INTEGER"/>
            <column name="invoice_id" type="INTEGER"/>
            <column name="amount" type="DECIMAL"/>
        </createTable>

        <addPrimaryKey
                tableName="bl_invoice_item_payment"
                columnNames="item_id,invoice_id,payment_id"
                constraintName="bl_invoice_item_payment_id_pk"/>
        <addForeignKeyConstraint
                baseTableName="bl_invoice_item_payment"
                baseColumnNames="invoice_id"
                constraintName="bill_item_payment_bill_item_bill_id_item_id_fk"
                referencedTableName="bl_invoice_item"
                referencedColumnNames="invoice_id"/>
        <addForeignKeyConstraint
                baseTableName="bl_invoice_item_payment"
                baseColumnNames="payment_id"
                constraintName="bill_item_payment_payment_payment_id_fk"
                referencedTableName="bl_payment"
                referencedColumnNames="payment_id"/>
    </changeSet>

    <changeSet id="create_st_device_type" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_device_type"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_device_type table</comment>
        <createTable tableName="st_device_type">
            <column name="device_type_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="device_type_id_pk"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="name" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="bl_invoice"
                constraintName="st_device_type_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="bl_invoice"
                constraintName="st_device_type_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>
    </changeSet>

    <changeSet id="create_lb_device" author="jesse-justin">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_device"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_device table</comment>
        <createTable tableName="lb_device">
            <column name="device_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="device_id_pk"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="name" type="TEXT"/>
            <column name="serial_no" type="TEXT"/>
            <column name="item_id" type="INTEGER"/>
            <column name="device_type_id" type="INTEGER"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_device"
                constraintName="lb_device_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_device"
                constraintName="lb_device_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>
        <addForeignKeyConstraint
                baseTableName="lb_device"
                baseColumnNames="item_id"
                constraintName="lb_device_item_item_id_fk"
                referencedTableName="item"
                referencedColumnNames="item_id"/>
        <addForeignKeyConstraint
                baseTableName="lb_device"
                baseColumnNames="device_type_id"
                constraintName="lb_device_st_device_type_device_type_id"
                referencedTableName="st_device_type"
                referencedColumnNames="device_type_id"/>
    </changeSet>

    <changeSet id="create_lb_device_location" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_device_location"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_device_location table</comment>
        <createTable tableName="lb_device_location">
            <column name="device_id" type="INTEGER"/>
            <column name="location_id" type="INTEGER"/>
            <column name="serial_number" type="INTEGER"/>
        </createTable>

        <addPrimaryKey columnNames="device_id,location_id" tableName="lb_device_location"/>

        <addForeignKeyConstraint
                baseTableName="lb_device_location"
                baseColumnNames="device_id"
                constraintName="lb_device_location_lb_device_device_id"
                referencedTableName="lb_device"
                referencedColumnNames="device_id"/>
    </changeSet>

    <changeSet id="create_lb_dispensable_item" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_dispensable_item"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_dispensable_item table</comment>
        <createTable tableName="lb_dispensable_item">
            <column name="item_id" type="INTEGER"/>
            <column name="concept_id" type="INTEGER"/>
        </createTable>

        <addPrimaryKey columnNames="item_id,concept_id" tableName="lb_dispensable_item"/>
        <addForeignKeyConstraint
                baseTableName="lb_dispensable_item"
                baseColumnNames="item_id"
                constraintName="lb_dispensable_item_item_item_id"
                referencedTableName="item"
                referencedColumnNames="item_id"/>
    </changeSet>

    <changeSet id="create_lb_sample" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_sample"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_sample table</comment>
        <createTable tableName="lb_sample">
            <column name="sample_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="sample_id_pk"/>
            </column>
            <column name="visit_id" type="INTEGER"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="label" type="TEXT"/>
            <column name="concept_id" type="INTEGER"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_sample"
                constraintName="lb_sample_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_sample"
                constraintName="lb_sample_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>
    </changeSet>

    <changeSet id="create_lb_sample_order" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_sample_order"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_sample_order table</comment>
        <createTable tableName="lb_sample_order">
            <column name="sample_id" type="INTEGER"/>
            <column name="order_id" type="INTEGER"/>
            <column name="technician" type="INTEGER"/>
        </createTable>
        <addPrimaryKey columnNames="sample_id,order_id" tableName="lb_sample_order"/>
        <addForeignKeyConstraint
                baseTableName="lb_sample_order"
                baseColumnNames="sample_id"
                constraintName="lb_sample_order_lb_sample_sample_id"
                referencedTableName="lb_sample"
                referencedColumnNames="sample_id"/>
        <addForeignKeyConstraint
                baseTableName="lb_sample_order"
                baseColumnNames="technician"
                constraintName="lb_sample_order_users_user_id"
                referencedTableName="users"
                referencedColumnNames="user_id"/>
    </changeSet>

    <changeSet id="create_lb_sample_status" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_sample_status"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_sample_status table</comment>
        <createTable tableName="lb_sample_status">
            <column name="sample_status_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="sample_status_id_pk"/>
            </column>
            <column name="sample_id" type="INTEGER"/>
            <column name="user_id" type="INTEGER"/>
            <column name="remarks" type="TEXT"/>
            <column name="timestamp" type="DATETIME"/>
            <column name="status" type="VARCHAR(30)"/>
        </createTable>
        <addForeignKeyConstraint
                baseTableName="lb_sample_status"
                baseColumnNames="sample_id"
                constraintName="lb_sample_status_lb_sample_sample_id"
                referencedTableName="lb_sample"
                referencedColumnNames="sample_id"/>
    </changeSet>

    <changeSet id="create_lb_storage_type" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_storage_type"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_storage_type table</comment>
        <createTable tableName="lb_storage_type">
            <column name="storage_type_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="storage_type_id_pk"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="name" type="VARCHAR(32)"/>
        </createTable>
    </changeSet>

    <changeSet id="create_lb_storage" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_storage"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_storage table</comment>
        <createTable tableName="lb_storage">
            <column name="storage_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="storage_id_pk"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="storage_type_id" type="INTEGER"/>
            <column name="capacity" type="INTEGER"/>
            <column name="name" type="VARCHAR(32)"/>
        </createTable>

        <addForeignKeyConstraint
                baseTableName="lb_storage"
                baseColumnNames="storage_type_id"
                constraintName="lb_storage_lb_storage_type_storage_type_id"
                referencedTableName="lb_storage_type"
                referencedColumnNames="storage_type_id"/>
    </changeSet>

    <changeSet id="create_lb_sample_storage" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_sample_storage"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_sample_storage table</comment>
        <createTable tableName="lb_sample_storage">
            <column name="sample_id" type="INTEGER"/>
            <column name="storage_id" type="INTEGER"/>
        </createTable>

        <addPrimaryKey columnNames="sample_id,storage_id" tableName="lb_sample_storage"
                       constraintName="lb_sample_storage_id_pk"/>
        <addForeignKeyConstraint
                baseTableName="lb_sample_storage"
                baseColumnNames="sample_id"
                constraintName="lb_sample_storage_lb_sample_sample_id"
                referencedTableName="lb_sample"
                referencedColumnNames="sample_id"/>
        <addForeignKeyConstraint
                baseTableName="lb_sample_storage"
                baseColumnNames="storage_id"
                constraintName="lb_sample_storage_lb_storage_storage_id"
                referencedTableName="lb_storage"
                referencedColumnNames="storage_id"/>
    </changeSet>

    <changeSet id="create_lb_test_allocation" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_test_allocation"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_test_allocation table</comment>
        <createTable tableName="lb_test_allocation">
            <column name="test_allocation_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="test_allocation_id_pk"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="sample_id" type="INTEGER"/>
            <column name="order_id" type="INTEGER"/>
            <column name="device_id" type="INTEGER"/>
            <column name="container_id" type="INTEGER"/>
            <column name="label" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_test_allocation"
                constraintName="lb_test_allocation_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_test_allocation"
                constraintName="lb_test_allocation_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseTableName="lb_test_allocation"
                baseColumnNames="sample_id"
                constraintName="lb_test_allocation_lb_sample_sample_id"
                referencedTableName="lb_sample"
                referencedColumnNames="sample_id"/>
        <addForeignKeyConstraint
                baseTableName="lb_test_allocation"
                baseColumnNames="order_id"
                constraintName="lb_test_allocation_orders_order_id"
                referencedTableName="orders"
                referencedColumnNames="order_id"/>
        <addForeignKeyConstraint
                baseTableName="lb_test_allocation"
                baseColumnNames="device_id"
                constraintName="lb_test_allocation_lb_storage_storage_id"
                referencedTableName="lb_device"
                referencedColumnNames="device_id"/>
    </changeSet>

    <changeSet id="create_lb_test_allocation_status" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_test_allocation_status"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_test_allocation_status table</comment>
        <createTable tableName="lb_test_allocation_status">
            <column name="test_allocation_status_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="test_allocation_status_id_pk"/>
            </column>
            <column name="test_allocation_id" type="INTEGER"/>
            <column name="user_id" type="INTEGER"/>
            <column name="status" type="VARCHAR(20)"/>
            <column name="remarks" type="TEXT"/>
            <column name="timestamp" type="DATETIME"/>
        </createTable>
        <addForeignKeyConstraint
                baseTableName="lb_test_allocation_status"
                baseColumnNames="test_allocation_id"
                constraintName="lb_test_allocation_status_lb_test_allocation_test_allocation_id"
                referencedTableName="lb_test_allocation"
                referencedColumnNames="test_allocation_id"/>

    </changeSet>

    <changeSet id="create_lb_test_result" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_test_result"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_test_result table</comment>
        <createTable tableName="lb_test_result">
            <column name="test_result_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="test_result_id_pk"/>
            </column>
            <column name="test_allocation_id" type="INTEGER"/>
            <column name="concept_id" type="INTEGER"/>
            <column name="value_text" type="TEXT"/>
            <column name="value_boolean" type="BOOLEAN"/>
            <column name="value_coded_concept_id" type="INTEGER"/>
            <column name="value_coded_name_id" type="INTEGER"/>
            <column name="value_drug_id" type="INTEGER"/>
            <column name="value_numeric" type="DOUBLE"/>
            <column name="value_group_id" type="INTEGER"/>
            <column name="value_date_time" type="DATETIME"/>
            <column name="value_modifier" type="TEXT"/>
            <column name="value_complex" type="TEXT"/>


        </createTable>
        <addForeignKeyConstraint
                baseTableName="lb_test_result"
                baseColumnNames="test_allocation_id"
                constraintName="lb_test_result_lb_test_allocation_test_allocation_id"
                referencedTableName="lb_test_allocation"
                referencedColumnNames="test_allocation_id"/>
    </changeSet>
    <changeSet id="add_columns_to_lb_test_result" author="josephat-mwakyusa" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="instrument_id" tableName="lb_test_result"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_test_result" >
            <column name="instrument_id" type="INTEGER">
                <constraints nullable="true"></constraints>
            </column>
        </addColumn>
        <addForeignKeyConstraint
                baseColumnNames="instrument_id"
                baseTableName="lb_test_result"
                constraintName="lb_test_result_instrument_id_concept_concept_id_fk"
                referencedColumnNames="concept_id"
                referencedTableName="concept"/>
    </changeSet>

    <changeSet id="add_columns_to_lb_sample" author="josephat-mwakyusa" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="specimen_source_id" tableName="lb_sample"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_sample" >
            <column name="specimen_source_id" type="INTEGER">
                <constraints nullable="true"></constraints>
            </column>
        </addColumn>
        <addForeignKeyConstraint
                baseColumnNames="specimen_source_id"
                baseTableName="lb_sample"
                constraintName="lb_sample_specimen_source_id_concept_concept_id_fk"
                referencedColumnNames="concept_id"
                referencedTableName="concept"/>
    </changeSet>

    <changeSet id="add_foreign_key_for_lb_test_result" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <foreignKeyConstraintExists schemaName="public" foreignKeyName="lb_test_result_value_group_id_lb_test_result_test_result_id_fk"></foreignKeyConstraintExists>
            </not>
        </preConditions>
        <sql>
            ALTER TABLE lb_test_result
            ADD CONSTRAINT lb_test_result_value_group_id_lb_test_result_test_result_id_fk
            FOREIGN KEY (value_group_id) REFERENCES lb_test_result(test_result_id);
        </sql>
    </changeSet>


    <changeSet id="create_st_requisition" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_requisition"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_requisition table</comment>
        <createTable tableName="st_requisition">
            <column name="requisition_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="requisition_id_pk"/>
            </column>
            <column name="requesting_location_id" type="INTEGER"/>
            <column name="requested_location_id" type="INTEGER"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_requisition"
                constraintName="st_requisition_changed_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_requisition"
                constraintName="st_requisition_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

    </changeSet>

    <changeSet id="create_st_issue" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_issue"/>
            </not>
        </preConditions>
        <comment>Creating openmrs issue_id table</comment>
        <createTable tableName="st_issue">
            <column name="issue_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="issue_id_pk"/>
            </column>
            <column name="requisition_id" type="INTEGER"/>
            <column name="issueing_location_id" type="INTEGER"/>
            <column name="issued_location_id" type="INTEGER"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_issue"
                constraintName="st_issue_changed_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_issue"
                constraintName="st_issue_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>


        <addForeignKeyConstraint
                baseTableName="st_issue"
                baseColumnNames="requisition_id"
                constraintName="st_issue_st_requisition_requisition_id"
                referencedTableName="st_requisition"
                referencedColumnNames="requisition_id"/>

    </changeSet>

    <changeSet id="create_st_issue_item" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_issue_item"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_issue_item table</comment>
        <createTable tableName="st_issue_item">
            <column name="issue_id" type="INTEGER"/>
            <column name="item_id" type="INTEGER"/>
            <column name="quantity" type="INTEGER"/>
            <column name="batch_no" type="VARCHAR(32)"/>
            <column name="expiry_date" type="DATETIME"/>
        </createTable>

        <addPrimaryKey columnNames="issue_id,item_id" tableName="st_issue_item"/>
        <addForeignKeyConstraint
                baseTableName="st_issue_item"
                baseColumnNames="issue_id"
                constraintName="st_issue_item_st_issue_issue_id"
                referencedTableName="st_issue"
                referencedColumnNames="issue_id"/>
        <addForeignKeyConstraint
                baseTableName="st_issue_item"
                baseColumnNames="item_id"
                constraintName="st_issue_item_item_id"
                referencedTableName="item"
                referencedColumnNames="item_id"/>

    </changeSet>

    <changeSet id="create_st_issue_status" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_issue_status"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_issue_status table</comment>
        <createTable tableName="st_issue_status">
            <column name="issue_status_id" type="INTEGER" autoIncrement="true">
                <constraints nullable="false" primaryKeyName="issue_status_id_pk" primaryKey="true"/>
            </column>
            <column name="issue_id" type="INTEGER"/>
            <column name="status" type="VARCHAR(32)"/>
            <column name="remarks" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_issue_status"
                constraintName="st_issue_status_changed_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_issue_status"
                constraintName="st_issue_status_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseTableName="st_issue_status"
                baseColumnNames="issue_id"
                constraintName="st_issue_status_st_issue_issue_id"
                referencedTableName="st_issue"
                referencedColumnNames="issue_id"/>
    </changeSet>

    <changeSet id="create_st_ledger_type" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_ledger_type"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_ledger_type table</comment>
        <createTable tableName="st_ledger_type">
            <column name="ledger_type_id" type="INTEGER" autoIncrement="true">
                <constraints nullable="false" primaryKeyName="ledger_type_id_pk" primaryKey="true"/>
            </column>
            <column name="operation" type="CHAR(1)"/>
            <column name="name" type="VARCHAR(32)"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_ledger_type"
                constraintName="st_ledger_type_changed_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_ledger_type"
                constraintName="st_ledger_type_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

    </changeSet>

    <changeSet id="create_st_ledger" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_ledger"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_ledger table</comment>
        <createTable tableName="st_ledger">
            <column name="ledger_id" type="INTEGER" autoIncrement="true">
                <constraints nullable="false" primaryKeyName="ledger_id" primaryKey="true"/>
            </column>
            <column name="ledger_type_id" type="INTEGER"/>
            <column name="item_id" type="INTEGER"/>
            <column name="batch_no" type="VARCHAR(255)"/>
            <column name="quantity" type="INTEGER"/>
            <column name="remarks" type="TEXT"/>
            <column name="location_id" type="TEXT"/>
            <column name="expiry_date" type="DATETIME"/>
            <column name="buying_price" type="DECIMAL"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_ledger"
                constraintName="st_ledger_changed_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_ledger"
                constraintName="st_ledger_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseTableName="st_ledger"
                baseColumnNames="ledger_type_id"
                constraintName="st_ledger_st_ledger_type_ledger_type_id_fk"
                referencedTableName="st_ledger_type"
                referencedColumnNames="ledger_type_id"/>
        <addForeignKeyConstraint
                baseTableName="st_ledger"
                baseColumnNames="item_id"
                constraintName="st_ledger_item_item_id_fk"
                referencedTableName="item"
                referencedColumnNames="item_id"/>
    </changeSet>

    <changeSet id="create_st_receipt" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_receipt"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_ledger table</comment>
        <createTable tableName="st_receipt">
            <column name="receipt_id" type="INTEGER" autoIncrement="true">
                <constraints nullable="false" primaryKeyName="receipt_id_pk" primaryKey="true"/>
            </column>
            <column name="receiving_location_id" type="INTEGER"/>
            <column name="issueing_location_id" type="INTEGER"/>
            <column name="issue_id" type="INTEGER"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_receipt"
                constraintName="st_receipt_changed_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_receipt"
                constraintName="st_receipt_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>
        <addForeignKeyConstraint
                baseTableName="st_receipt"
                baseColumnNames="issue_id"
                constraintName="st_receipt_st_issue_issue_id_fk"
                referencedTableName="st_issue"
                referencedColumnNames="issue_id"/>

    </changeSet>

    <changeSet id="create_st_receipt_item" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_receipt_item"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_receipt_item table</comment>
        <createTable tableName="st_receipt_item">
            <column name="receipt_id" type="INTEGER"/>
            <column name="item_id" type="INTEGER"/>
            <column name="quantity" type="INTEGER"/>
            <column name="batch_no" type="VARCHAR(32)"/>
            <column name="expiry_date" type="DATETIME"/>
        </createTable>
        <addPrimaryKey columnNames="receipt_id,item_id" tableName="st_receipt_item"/>
        <addForeignKeyConstraint
                baseTableName="st_receipt_item"
                baseColumnNames="receipt_id"
                constraintName="st_receipt_item_st_receipt_receipt_id"
                referencedTableName="st_receipt"
                referencedColumnNames="receipt_id"/>
        <addForeignKeyConstraint
                baseTableName="st_receipt_item"
                baseColumnNames="item_id"
                constraintName="st_receipt_item_item_item_id"
                referencedTableName="item"
                referencedColumnNames="item_id"/>

    </changeSet>

    <changeSet id="create_st_reorder_level" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_reorder_level"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_reorder_level table</comment>
        <createTable tableName="st_reorder_level">
            <column name="location_id" type="INTEGER"/>
            <column name="item_id" type="INTEGER"/>
            <column name="quantity" type="INTEGER"/>
        </createTable>
        <addPrimaryKey columnNames="item_id,location_id" tableName="st_reorder_level"/>
        <addForeignKeyConstraint
                baseTableName="st_reorder_level"
                baseColumnNames="item_id"
                constraintName="st_reorder_level_item_item_id_fk"
                referencedTableName="item"
                referencedColumnNames="item_id"/>

    </changeSet>

    <changeSet id="create_st_requisition_item" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_requisition_item"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_requisition_item table</comment>
        <createTable tableName="st_requisition_item">
            <column name="requisition_id" type="INTEGER"/>
            <column name="item_id" type="INTEGER"/>
            <column name="quantity" type="INTEGER"/>
        </createTable>
        <addPrimaryKey columnNames="item_id,requisition_id" tableName="st_requisition_item"/>
        <addForeignKeyConstraint
                baseTableName="st_requisition_item"
                baseColumnNames="item_id"
                constraintName="st_requisition_item_item_item_id_fk"
                referencedTableName="item"
                referencedColumnNames="item_id"/>
        <addForeignKeyConstraint
                baseTableName="st_requisition_item"
                baseColumnNames="requisition_id"
                constraintName="st_requisition_item_st_requisition_requisition_id_fk"
                referencedTableName="st_requisition"
                referencedColumnNames="requisition_id"/>

    </changeSet>

    <changeSet id="create_st_requisition_status" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_requisition_status"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_requisition_status table</comment>
        <createTable tableName="st_requisition_status">
            <column name="requisition_status_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" nullable="false" primaryKeyName="requisition_status_id_pk"/>
            </column>
            <column name="requisition_id" type="INTEGER"/>
            <column name="remarks" type="TEXT"/>
            <column name="status" type="VARCHAR(32)"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_requisition_status"
                constraintName="st_requisition_status_status_changed_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_requisition_status"
                constraintName="st_requisition_status_status_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>
        <addForeignKeyConstraint
                baseTableName="st_requisition_status"
                baseColumnNames="requisition_id"
                constraintName="st_requisition_status_st_requisition_requisition_id_fk"
                referencedTableName="st_requisition"
                referencedColumnNames="requisition_id"/>
    </changeSet>

    <changeSet id="create_st_transaction_type" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_transaction_type"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_requisition_status table</comment>
        <createTable tableName="st_transaction_type">
            <column name="transaction_type_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" nullable="false" primaryKeyName="transaction_type_id_pk"/>
            </column>
            <column name="name" type="VARCHAR(64)"/>
        </createTable>
    </changeSet>

    <changeSet id="create_st_transaction" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_transaction"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_requisition_status table</comment>
        <createTable tableName="st_transaction">
            <column name="transaction_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" nullable="false" primaryKeyName="transaction_id_pk"/>
            </column>
            <column name="transaction_type_id" type="INTEGER"/>
            <column name="location_id" type="INTEGER"/>
            <column name="item_id" type="INTEGER"/>
            <column name="batch_no" type="VARCHAR(255)"/>
            <column name="current_quantity" type="INTEGER"/>
            <column name="previous_quantity" type="INTEGER"/>
            <column name="expire_date" type="DATETIME"/>
        </createTable>
        <addForeignKeyConstraint
                baseTableName="st_transaction"
                baseColumnNames="item_id"
                constraintName="st_transaction_item_item_id_fk"
                referencedTableName="item"
                referencedColumnNames="item_id"/>
        <addForeignKeyConstraint
                baseTableName="st_transaction"
                baseColumnNames="transaction_type_id"
                constraintName="st_transaction_st_transaction_type_transaction_type_id_fk"
                referencedTableName="st_transaction_type"
                referencedColumnNames="transaction_type_id"/>
    </changeSet>

    <changeSet id="create_st_stock" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_stock"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_stock table</comment>
        <createTable tableName="st_stock">
            <column name="stock_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" nullable="false" primaryKeyName="stock_id_pk"/>
            </column>
            <column name="item_id" type="INTEGER"/>
            <column name="batch" type="VARCHAR(20)"/>
            <column name="expiry_date" type="DATETIME"/>
            <column name="quantity" type="INTEGER"/>
            <column name="location_id" type="INTEGER"/>
        </createTable>
        <addForeignKeyConstraint
                baseTableName="st_stock"
                baseColumnNames="item_id"
                constraintName="st_stock_item_item_id_fk"
                referencedTableName="item"
                referencedColumnNames="item_id"/>
        <createIndex tableName="st_stock" indexName="st_stock_in" unique="true">
            <column name="item_id"></column>
            <column name="expiry_date"></column>
            <column name="batch"></column>
            <column name="location_id"></column>
        </createIndex>
    </changeSet>




    <changeSet id="group_services_concept" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <sqlCheck  expectedResult="0">select count(*) from concept_class where name = 'ConceptGroup'</sqlCheck>

        </preConditions>
        <insert tableName="concept_class">
            <column name="concept_class_id" value="30"/>
            <column name="name" value="ConceptGroup"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000022IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept">
            <column name="concept_id" value="1103"/>
            <column name="short_name" value="Services"/>
            <column name="description" value="Grouped services by visit type"/>
            <column name="datatype_id" value="2"/>
            <column name="class_id" value="30"/>
            <column name="is_set" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000003333IIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_name">
            <column name="concept_id" value="1103"/>
            <column name="name" value="Services"/>
            <column name="locale" value="en"/>
            <column name="concept_name_type" value="FULLY_SPECIFIED"/>
            <column name="locale_preferred" value="30"/>
            <column name="voided" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000003333IIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>

        <insert tableName="concept_set">
            <column name="concept_id" value="1100"/>
            <column name="concept_set" value="1103"/>
            <column name="sort_weight" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00001113IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>

        <insert tableName="concept_set">
            <column name="concept_id" value="1101"/>
            <column name="concept_set" value="1103"/>
            <column name="sort_weight" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="000022223IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>

    </changeSet>

    <changeSet id="group_payments_concept" author="jesse-justin" dbms="mysql">

        <preConditions onFail="MARK_RAN">
            <sqlCheck  expectedResult="0">select count(*) from concept where short_name = 'PaymentCategories'</sqlCheck>

        </preConditions>

        <insert tableName="concept">
            <column name="concept_id" value="1111"/>
            <column name="short_name" value="PaymentCategories"/>
            <column name="description" value="Grouped Payment Categories"/>
            <column name="datatype_id" value="2"/>
            <column name="class_id" value="30"/>
            <column name="is_set" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000004444IIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_name">
            <column name="concept_id" value="1111"/>
            <column name="name" value="PaymentCategories"/>
            <column name="locale" value="en"/>
            <column name="concept_name_type" value="FULLY_SPECIFIED"/>
            <column name="locale_preferred" value="30"/>
            <column name="voided" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000004444IIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>

        <insert tableName="concept_set">
            <column name="concept_id" value="1150"/>
            <column name="concept_set" value="1111"/>
            <column name="sort_weight" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00001114IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>

        <insert tableName="concept_set">
            <column name="concept_id" value="1151"/>
            <column name="concept_set" value="1111"/>
            <column name="sort_weight" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="000022224IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>

    </changeSet>

    <changeSet author="jesse-justin" id="insert_visit_types" dbms="mysql">
        <preConditions  onFail="MARK_RAN">
            <sqlCheck  expectedResult="0">select count(*) from visit_type where name = 'OPD'</sqlCheck>
        </preConditions>

        <insert tableName="visit_type">
            <column name="uuid" value="2mnxl2eb-5345-11e8-5555-40b034c3cfee"/>
            <column name="name" value="OPD"/>
            <column name="description" value="OPD Services Visit Type"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-12-27 00:00:00"/>
            <column name="retired" value="0"/>
        </insert>

        <insert tableName="visit_type">
            <column name="uuid" value="2msir5eb-5ww5-11e8-5555-40b034c3cfee"/>
            <column name="name" value="Health Programs"/>
            <column name="description" value="Health Programs"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-12-27 00:00:00"/>
            <column name="retired" value="0"/>
        </insert>


        <insert tableName="visit_attribute_type">
            <column name="name" value="PaymentCategory"/>
            <column name="min_occurs" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-12-27 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="PTYPE000IIIIIIIIIIIIIIIIIIIIIIIATYPE"/>
            <column name="datatype" value="org.openmrs.customdatatype.datatype.FreeTextDatatype"/>
        </insert>

        <insert tableName="visit_attribute_type">
            <column name="name" value="PaymentScheme"/>
            <column name="min_occurs" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-12-27 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="PSCHEME0IIIIIIIIIIIIIIIIIIIIIIIATYPE"/>
            <column name="datatype" value="org.openmrs.customdatatype.datatype.FreeTextDatatype"/>
        </insert>

        <insert tableName="visit_attribute_type">
            <column name="name" value="Service"/>
            <column name="min_occurs" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-12-27 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="SERVICE0IIIIIIIIIIIIIIIIIIIIIIIATYPE"/>
            <column name="datatype" value="org.openmrs.customdatatype.datatype.FreeTextDatatype"/>
        </insert>
        <insert tableName="visit_attribute_type">
            <column name="name" value="Insurance"/>
            <column name="min_occurs" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-12-27 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="INSURANCEIIIIIIIIIIIIIIIIIIIIIIATYPE"/>
            <column name="datatype" value="org.openmrs.customdatatype.datatype.FreeTextDatatype"/>
        </insert>
        <insert tableName="visit_attribute_type">
            <column name="name" value="Insurance ID"/>
            <column name="min_occurs" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-12-27 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="INSURANCEIDIIIIIIIIIIIIIIIIIIIIATYPE"/>
            <column name="datatype" value="org.openmrs.customdatatype.datatype.FreeTextDatatype"/>
        </insert>
        <insert tableName="visit_attribute_type">
            <column name="name" value="Insurance Authorization Number"/>
            <column name="min_occurs" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-12-27 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="INSURANCEAUTHNOIIIIIIIIIIIIIIIIATYPE"/>
            <column name="datatype" value="org.openmrs.customdatatype.datatype.FreeTextDatatype"/>
        </insert>
    </changeSet>

    <changeSet author="vincent-minde" id="insert_billing_metadata" dbms="mysql">
        <preConditions  onFail="MARK_RAN">
            <sqlCheck  expectedResult="0">select count(*) from encounter_type where name = 'Registration'</sqlCheck>
        </preConditions>
        <!-- Registration Encounter type -->
        <insert tableName="encounter_type">
            <column name="name" value="Registration"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-12-27 00:00:00"/>
            <column name="description" value="Encounters used to record registration actions"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="REG00000IIIIIIIIIIIIIIIIIIIIIIIETYPE"/>
        </insert>
        <!-- Registration of Billing order type -->
        <insert tableName="order_type">
            <column name="name" value="Billing"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-12-27 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="java_class_name" value="org.openmrs.Order"/>
            <column name="uuid" value="BIL00000IIIIIIIIIIIIIIIIIIIIIIIOTYPE"/>
        </insert>
        <!-- Registration of Registration fee structure -->
        <insert tableName="concept">
            <column name="concept_id" value="1110"/>
            <column name="short_name" value="Registration Fee"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-12-27 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="is_set" value="0"/>
            <column name="uuid" value="REG00000IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
            <column name="datatype_id" value="3"/>
            <column name="class_id" value="11"/>
        </insert>

        <insert tableName="concept_name">
            <column name="concept_id" value="1110"/>
            <column name="name" value="Registration Fee"/>
            <column name="locale" value="en"/>
            <column name="concept_name_type" value="FULLY_SPECIFIED"/>
            <column name="locale_preferred" value="1"/>
            <column name="voided" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="REG00000IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
    </changeSet>

    <changeSet id="create_person_attributes" author="jesse-justin" dbms="mysql">

        <preConditions  onFail="MARK_RAN">
            <sqlCheck  expectedResult="0">select count(*) from person_attribute_type where name = 'occupation'</sqlCheck>
        </preConditions>

        <insert tableName="person_attribute_type">
            <column name="name" value="occupation"/>
            <column name="searchable" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="5c4b5322-703e-4589-b79c-b206b538fdae"/>
        </insert>

        <insert tableName="person_attribute_type">
            <column name="name" value="mname"/>
            <column name="searchable" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="6c990333-aa2b-4778-846f-9ba6edfd3661"/>
        </insert>

        <insert tableName="person_attribute_type">
            <column name="name" value="fileNo"/>
            <column name="searchable" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="4041b679-61b6-478e-a391-4cab3c48cd97"/>
        </insert>

        <insert tableName="person_attribute_type">
            <column name="name" value="tribe"/>
            <column name="searchable" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="50c61832-3f6c-4ea1-8ae3-9e363972d905"/>
        </insert>

        <insert tableName="person_attribute_type">
            <column name="name" value="maritalStatus"/>
            <column name="searchable" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="0eeecb5a-b034-431f-98ec-d2b672719495"/>
        </insert>

        <insert tableName="person_attribute_type">
            <column name="name" value="kinFname"/>
            <column name="searchable" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="5549614f-7bc2-49d0-bd1d-94cbdbbd004b"/>
        </insert>
        <insert tableName="person_attribute_type">
            <column name="name" value="kinLName"/>
            <column name="searchable" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="9bd41adb-ee63-49f7-ac54-bb74a7ad8334"/>
        </insert>
        <insert tableName="person_attribute_type">
            <column name="name" value="kinPhone"/>
            <column name="searchable" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="c38d5e55-7036-4b7a-8fc7-ad15e8c2d87a"/>
        </insert>

        <insert tableName="person_attribute_type">
            <column name="name" value="kinRelationship"/>
            <column name="searchable" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="8aaff8a9-1eae-4d67-b336-8fc5d0c56e51"/>
        </insert>

    </changeSet>

    <changeSet id="add_patient_identifier" author="jesse-justin" dbms="mysql" >
        <preConditions  onFail="MARK_RAN">
            <sqlCheck  expectedResult="0">select count(*) from patient_identifier_type where name = 'MRN'</sqlCheck>
        </preConditions>
        <insert tableName="patient_identifier_type">
                <column name="name" value="MRN"/>
                <column name="check_digit" value="0"/>
                <column name="required" value="1"/>
                <column name="creator" value="1"/>
                <column name="date_created" value="2020-10-28 00:00:00"/>
                <column name="retired" value="0"/>
                <column name="uuid" value="26742868-a38c-4e6a-ac1d-ae283c414c2e"/>
            </insert>
        <update tableName="patient_identifier_type">
            <column name="required" value="0"/>
            <where>name = 'OpenMRS ID'</where>
        </update>
    </changeSet>
    <changeSet author="vincent-minde" id="update_required_global_properties" dbms="mysql">
        <!-- Update order drug routes concept UUID -->
        <update tableName="global_property">
            <column name="property_value" value="162394AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/>
            <where>property = 'order.drugRoutesConceptUuid'</where>
        </update>
        <update tableName="global_property">
            <column name="property_value" value="162384AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/>
            <where>property = 'order.drugDosingUnitsConceptUuid'</where>
        </update>
    </changeSet>
    <changeSet author="vincent-minde" id="create_service_concepts" dbms="mysql">
        <preConditions  onFail="MARK_RAN">
            <sqlCheck  expectedResult="0">select count(*) from concept_class where name = 'Service'</sqlCheck>
        </preConditions>

        <!-- Create Class for Service -->
        <insert tableName="concept_class">
            <column name="concept_class_id" value="26"/>
            <column name="name" value="Service"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000000IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <!-- Create Concepts for Service -->
        <insert tableName="concept">
            <column name="concept_id" value="1100"/>
            <column name="short_name" value="OPD"/>
            <column name="description" value="OPD Services Visit Type"/>
            <column name="datatype_id" value="2"/>
            <column name="class_id" value="26"/>
            <column name="is_set" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000003IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_name">
            <column name="concept_id" value="1100"/>
            <column name="name" value="OPD"/>
            <column name="locale" value="en"/>
            <column name="concept_name_type" value="FULLY_SPECIFIED"/>
            <column name="locale_preferred" value="1"/>
            <column name="voided" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000003IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept">
            <column name="concept_id" value="1101"/>
            <column name="short_name" value="Health Programs"/>
            <column name="description" value="Health Programs"/>
            <column name="datatype_id" value="2"/>
            <column name="class_id" value="26"/>
            <column name="is_set" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000004IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_name">
            <column name="concept_id" value="1101"/>
            <column name="name" value="Health Programs"/>
            <column name="locale" value="en"/>
            <column name="concept_name_type" value="FULLY_SPECIFIED"/>
            <column name="locale_preferred" value="1"/>
            <column name="voided" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000004IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept">
            <column name="concept_id" value="1102"/>
            <column name="short_name" value="General OPD"/>
            <column name="description" value="General OPD Services in OPD"/>
            <column name="datatype_id" value="2"/>
            <column name="class_id" value="26"/>
            <column name="is_set" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000005IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_name">
            <column name="concept_id" value="1102"/>
            <column name="name" value="General OPD"/>
            <column name="locale" value="en"/>
            <column name="concept_name_type" value="FULLY_SPECIFIED"/>
            <column name="locale_preferred" value="1"/>
            <column name="voided" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000005IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept">
            <column name="concept_id" value="1104"/>
            <column name="short_name" value="Diagnostic Services"/>
            <column name="description" value="Diagnostic Services in OPD"/>
            <column name="datatype_id" value="2"/>
            <column name="class_id" value="26"/>
            <column name="is_set" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000007IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_name">
            <column name="concept_id" value="1104"/>
            <column name="name" value="Diagnostic Services"/>
            <column name="locale" value="en"/>
            <column name="concept_name_type" value="FULLY_SPECIFIED"/>
            <column name="locale_preferred" value="1"/>
            <column name="voided" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000007IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept">
            <column name="concept_id" value="1105"/>
            <column name="short_name" value="Specialized Clinics"/>
            <column name="description" value="Specialized Clinics in OPD"/>
            <column name="datatype_id" value="2"/>
            <column name="class_id" value="26"/>
            <column name="is_set" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000008IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_name">
            <column name="concept_id" value="1105"/>
            <column name="name" value="Specialized Clinics"/>
            <column name="locale" value="en"/>
            <column name="concept_name_type" value="FULLY_SPECIFIED"/>
            <column name="locale_preferred" value="1"/>
            <column name="voided" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000008IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept">
            <column name="concept_id" value="1106"/>
            <column name="short_name" value="CTC"/>
            <column name="description" value="CTC in Health Programs"/>
            <column name="datatype_id" value="2"/>
            <column name="class_id" value="26"/>
            <column name="is_set" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000009IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_name">
            <column name="concept_id" value="1106"/>
            <column name="name" value="CTC"/>
            <column name="locale" value="en"/>
            <column name="concept_name_type" value="FULLY_SPECIFIED"/>
            <column name="locale_preferred" value="1"/>
            <column name="voided" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000009IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept">
            <column name="concept_id" value="1107"/>
            <column name="short_name" value="RCH"/>
            <column name="description" value="RCH in Health Programs"/>
            <column name="datatype_id" value="2"/>
            <column name="class_id" value="26"/>
            <column name="is_set" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000010IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_name">
            <column name="concept_id" value="1107"/>
            <column name="name" value="RCH"/>
            <column name="locale" value="en"/>
            <column name="concept_name_type" value="FULLY_SPECIFIED"/>
            <column name="locale_preferred" value="1"/>
            <column name="voided" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000010IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept">
            <column name="concept_id" value="1108"/>
            <column name="short_name" value="MAT"/>
            <column name="description" value="MAT in Health Programs"/>
            <column name="datatype_id" value="2"/>
            <column name="class_id" value="26"/>
            <column name="is_set" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000011IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_name">
            <column name="concept_id" value="1108"/>
            <column name="name" value="MAT"/>
            <column name="locale" value="en"/>
            <column name="concept_name_type" value="FULLY_SPECIFIED"/>
            <column name="locale_preferred" value="1"/>
            <column name="voided" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000011IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept">
            <column name="concept_id" value="1109"/>
            <column name="short_name" value="TB"/>
            <column name="description" value="TB in Health Programs"/>
            <column name="datatype_id" value="2"/>
            <column name="class_id" value="26"/>
            <column name="is_set" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000012IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_name">
            <column name="concept_id" value="1109"/>
            <column name="name" value="TB"/>
            <column name="locale" value="en"/>
            <column name="concept_name_type" value="FULLY_SPECIFIED"/>
            <column name="locale_preferred" value="1"/>
            <column name="voided" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000012IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_set">
            <column name="concept_id" value="1102"/>
            <column name="concept_set" value="1100"/>
            <column name="sort_weight" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000013IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_set">
            <column name="concept_id" value="1104"/>
            <column name="concept_set" value="1100"/>
            <column name="sort_weight" value="2"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000014IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_set">
            <column name="concept_id" value="1105"/>
            <column name="concept_set" value="1100"/>
            <column name="sort_weight" value="3"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000015IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_set">
            <column name="concept_id" value="1106"/>
            <column name="concept_set" value="1101"/>
            <column name="sort_weight" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000016IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_set">
            <column name="concept_id" value="1107"/>
            <column name="concept_set" value="1101"/>
            <column name="sort_weight" value="2"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000017IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_set">
            <column name="concept_id" value="1108"/>
            <column name="concept_set" value="1101"/>
            <column name="sort_weight" value="3"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000018IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_set">
            <column name="concept_id" value="1109"/>
            <column name="concept_set" value="1101"/>
            <column name="sort_weight" value="3"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000019IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
    </changeSet>

    <changeSet author="vincent-minde" id="create_payment_concepts" dbms="mysql">
        <!-- Create Class for Payment Type -->
        <preConditions  onFail="MARK_RAN">
            <sqlCheck  expectedResult="0">select count(*) from concept_class where name = 'Payment Type'</sqlCheck>
        </preConditions>

        <insert tableName="concept_class">
            <column name="concept_class_id" value="27"/>
            <column name="name" value="Payment Type"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000001IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <!-- Create Class for Payment Scheme -->
        <insert tableName="concept_class">
            <column name="concept_class_id" value="28"/>
            <column name="name" value="Payment Scheme"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000002IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <!-- Create Concepts for Service -->
        <insert tableName="concept">
            <column name="concept_id" value="1150"/>
            <column name="short_name" value="Cash"/>
            <column name="description" value="Cash"/>
            <column name="datatype_id" value="2"/>
            <column name="class_id" value="27"/>
            <column name="is_set" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000100IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_name">
            <column name="concept_id" value="1150"/>
            <column name="name" value="Cash"/>
            <column name="locale" value="en"/>
            <column name="concept_name_type" value="FULLY_SPECIFIED"/>
            <column name="locale_preferred" value="1"/>
            <column name="voided" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000100IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept">
            <column name="concept_id" value="1151"/>
            <column name="short_name" value="Insurance"/>
            <column name="description" value="Insurance"/>
            <column name="datatype_id" value="2"/>
            <column name="class_id" value="27"/>
            <column name="is_set" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000101IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_name">
            <column name="concept_id" value="1151"/>
            <column name="name" value="Insurance"/>
            <column name="locale" value="en"/>
            <column name="concept_name_type" value="FULLY_SPECIFIED"/>
            <column name="locale_preferred" value="1"/>
            <column name="voided" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000101IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept">
            <column name="concept_id" value="1152"/>
            <column name="short_name" value="Normal"/>
            <column name="description" value="Normal"/>
            <column name="datatype_id" value="2"/>
            <column name="class_id" value="28"/>
            <column name="is_set" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000102IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_name">
            <column name="concept_id" value="1152"/>
            <column name="name" value="Normal"/>
            <column name="locale" value="en"/>
            <column name="concept_name_type" value="FULLY_SPECIFIED"/>
            <column name="locale_preferred" value="1"/>
            <column name="voided" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000102IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept">
            <column name="concept_id" value="1153"/>
            <column name="short_name" value="Fast"/>
            <column name="description" value="Fast"/>
            <column name="datatype_id" value="2"/>
            <column name="class_id" value="28"/>
            <column name="is_set" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000103IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_name">
            <column name="concept_id" value="1153"/>
            <column name="name" value="Fast"/>
            <column name="locale" value="en"/>
            <column name="concept_name_type" value="FULLY_SPECIFIED"/>
            <column name="locale_preferred" value="1"/>
            <column name="voided" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000103IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <!-- Create Class for Insurance -->
        <insert tableName="concept_class">
            <column name="concept_class_id" value="29"/>
            <column name="name" value="Insurance"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000104IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept">
            <column name="concept_id" value="1154"/>
            <column name="short_name" value="NHIF"/>
            <column name="description" value="NHIF"/>
            <column name="datatype_id" value="2"/>
            <column name="class_id" value="29"/>
            <column name="is_set" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000105IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_name">
            <column name="concept_id" value="1154"/>
            <column name="name" value="NHIF"/>
            <column name="locale" value="en"/>
            <column name="concept_name_type" value="FULLY_SPECIFIED"/>
            <column name="locale_preferred" value="1"/>
            <column name="voided" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000105IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept">
            <column name="concept_id" value="1155"/>
            <column name="short_name" value="AAR"/>
            <column name="description" value="AAR"/>
            <column name="datatype_id" value="2"/>
            <column name="class_id" value="29"/>
            <column name="is_set" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000106IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_name">
            <column name="concept_id" value="1155"/>
            <column name="name" value="AAR"/>
            <column name="locale" value="en"/>
            <column name="concept_name_type" value="FULLY_SPECIFIED"/>
            <column name="locale_preferred" value="1"/>
            <column name="voided" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000106IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept">
            <column name="concept_id" value="1156"/>
            <column name="short_name" value="STRATERGIES"/>
            <column name="description" value="STRATERGIES"/>
            <column name="datatype_id" value="2"/>
            <column name="class_id" value="29"/>
            <column name="is_set" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="retired" value="0"/>
            <column name="uuid" value="00000107IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_name">
            <column name="concept_id" value="1156"/>
            <column name="name" value="STRATERGIES"/>
            <column name="locale" value="en"/>
            <column name="concept_name_type" value="FULLY_SPECIFIED"/>
            <column name="locale_preferred" value="1"/>
            <column name="voided" value="0"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000107IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <!-- Set member for Cash  Normal and Fast-->
        <insert tableName="concept_set">
            <column name="concept_id" value="1152"/>
            <column name="concept_set" value="1150"/>
            <column name="sort_weight" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000108IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_set">
            <column name="concept_id" value="1153"/>
            <column name="concept_set" value="1150"/>
            <column name="sort_weight" value="2"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000109IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <!-- Set member for Insurance NHIF AAR etc-->
        <insert tableName="concept_set">
            <column name="concept_id" value="1154"/>
            <column name="concept_set" value="1151"/>
            <column name="sort_weight" value="1"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000110IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_set">
            <column name="concept_id" value="1155"/>
            <column name="concept_set" value="1151"/>
            <column name="sort_weight" value="2"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000111IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
        <insert tableName="concept_set">
            <column name="concept_id" value="1156"/>
            <column name="concept_set" value="1151"/>
            <column name="sort_weight" value="3"/>
            <column name="creator" value="1"/>
            <column name="date_created" value="2020-10-28 00:00:00"/>
            <column name="uuid" value="00000112IIIIIIIIIIIIIIIIIIIIIIIIIIII"/>
        </insert>
    </changeSet>

    <changeSet id="delete_facility_visit" author="jesse-justin" dbms="mysql">
        <preConditions  onFail="MARK_RAN">
            <sqlCheck  expectedResult="1">select count(*) from visit_type where name = 'Facility Visit'</sqlCheck>
        </preConditions>
        <delete tableName="visit_type">
            <where>name='Facility Visit'</where>
        </delete>
    </changeSet>

    <changeSet id="add_columns_to_bl_payment" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="creator" tableName="bl_payment"/>
            </not>
        </preConditions>
        <addColumn tableName="bl_payment" >
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </addColumn>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="bl_payment"
                constraintName="bl_payment_changed_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="bl_payment"
                constraintName="bl_payment_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

    </changeSet>

    <changeSet id="add_columns_to_lb_storage_type" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="creator" tableName="lb_storage_type"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_storage_type" >
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </addColumn>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_storage_type"
                constraintName="lb_storage_type_changed_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_storage_type"
                constraintName="lb_storage_type_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

    </changeSet>

    <changeSet id="add_columns_to_lb_storage" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="creator" tableName="lb_storage"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_storage" >
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </addColumn>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_storage"
                constraintName="lb_storage_changed_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_storage"
                constraintName="lb_storage_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

    </changeSet>

    <changeSet id="add_columns_to_st_requisition" author="jesse-justin" dbms="mysql">
    <preConditions onFail="MARK_RAN">
        <not>
            <columnExists columnName="uuid" tableName="st_requisition"/>
        </not>
    </preConditions>
    <addColumn tableName="st_requisition" >
        <column name="uuid" type="char(38)">
            <constraints nullable="false" unique="true"></constraints>
        </column>
    </addColumn>
    </changeSet>

    <changeSet id="add_columns_to_st_issue" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="uuid" tableName="st_issue"/>
            </not>
        </preConditions>
        <addColumn tableName="st_issue" >
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="add_columns_to_st_issue_status" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="uuid" tableName="st_issue_status"/>
            </not>
        </preConditions>
        <addColumn tableName="st_issue_status">
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="add_columns_to_st_transaction" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="creator" tableName="st_transaction"/>
            </not>
        </preConditions>
        <addColumn tableName="st_transaction" >
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </addColumn>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_transaction"
                constraintName="st_transaction_changed_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_transaction"
                constraintName="st_transaction_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

    </changeSet>

        <changeSet  author="jesse-justin"  id="dropForeignKeyConstraintDiscountToDiscountCriteria">
            <preConditions onFail="MARK_RAN">
                <foreignKeyConstraintExists foreignKeyName="discount_discount_criteria_discount_criteria_id_fk"/>
            </preConditions>
            <dropForeignKeyConstraint
                    baseTableName="bl_discount"
                    constraintName="discount_discount_criteria_discount_criteria_id_fk"/>
        </changeSet>

    <changeSet id="add_columns_to_st_ledger" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="uuid" tableName="st_ledger"/>
            </not>
        </preConditions>
        <addColumn tableName="st_ledger">
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="add_columns_to_st_ledger_type" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="uuid" tableName="st_ledger_type"/>
            </not>
        </preConditions>
        <addColumn tableName="st_ledger_type" >
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="add_columns_to_st_requisition_status" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="uuid" tableName="st_requisition_status"/>
            </not>
        </preConditions>
        <addColumn tableName="st_requisition_status" >
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="add_columns_to_st_receipts" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="uuid" tableName="st_receipt"/>
            </not>
        </preConditions>
        <addColumn tableName="st_receipt" >
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="add_datetime_to_lb_sample" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="date_time" tableName="lb_sample"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_sample" >
            <column name="date_time" type="DATETIME">
                <constraints nullable="true"></constraints>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="add_abnormal_column_to_lb_test_result" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="abnormal" tableName="lb_test_result"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_test_result" >
            <column name="abnormal" type="BOOLEAN">
                <constraints nullable="true"></constraints>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="add_openmrs_columns_to_lb_test_result" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="date_created" tableName="lb_test_result"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_test_result" >
            <column name="date_created" type="DATE"/>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN"/>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </addColumn>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_test_result"
                constraintName="lb_test_result_changed_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

    </changeSet>

    <changeSet id="update_date_created_column_to_datetime" author="josephat-mwakyusa" dbms="mysql">
        <sql>
            ALTER TABLE lb_test_result MODIFY COLUMN date_created DATETIME
        </sql>
    </changeSet>

    <changeSet id="add_uuid_column_to_lb_test_result" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="uuid" tableName="lb_test_result"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_test_result" >
            <column name="uuid" type="char(38)"/>
        </addColumn>
    </changeSet>

    <changeSet author="jesse-justin" id="create_lb_test_time_configuration" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_test_time_configuration"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_test_time_configuration table</comment>
        <createTable tableName="lb_test_time_configuration">
            <column autoIncrement="true" name="config_id" type="INTEGER">
                <constraints nullable="false" primaryKey="true" primaryKeyName="test_time_config_id_pk"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="concept_id" type="INTEGER"/>
            <column name="standard_tat" type="INTEGER"/>
            <column name="urgent_tat" type="INTEGER"/>
            <column name="additional_request_time_limit" type="INTEGER"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN"/>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_test_time_configuration"
                constraintName="lb_test_time_configuration_changed_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_test_time_configuration"
                constraintName="lb_test_time_configuration_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="concept_id"
                baseTableName="lb_test_time_configuration"
                constraintName="lb_test_time_configuration_concept_id_concept_concept_id_fk"
                referencedColumnNames="concept_id"
                referencedTableName="concept"/>

    </changeSet>

    <changeSet author="jesse-justin" id="create_lb_test_ranges_configuration" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_test_ranges_configuration"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_test_ranges_configuration table</comment>
        <createTable tableName="lb_test_ranges_configuration">
            <column autoIncrement="true" name="config_id" type="INTEGER">
                <constraints nullable="false" primaryKey="true" primaryKeyName="lb_test_ranges_configuration_id_pk"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="concept_id" type="INTEGER"/>
            <column name="gender" type="TEXT"/>
            <column name="absolute_high" type="DOUBLE"/>
            <column name="critical_high" type="DOUBLE"/>
            <column name="normal_high" type="DOUBLE"/>
            <column name="absolute_low" type="DOUBLE"/>
            <column name="critical_low" type="DOUBLE"/>
            <column name="normal_low" type="DOUBLE"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN"/>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_test_ranges_configuration"
                constraintName="lb_test_ranges_configuration_changed_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_test_ranges_configuration"
                constraintName="lb_test_ranges_configuration_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="concept_id"
                baseTableName="lb_test_ranges_configuration"
                constraintName="lb_test_ranges_configuration_concept_id_concept_concept_id_fk"
                referencedColumnNames="concept_id"
                referencedTableName="concept"/>

    </changeSet>

    <changeSet id="create_lb_test_order_location" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_test_order_location"/>
            </not>
        </preConditions>
        <comment>Creating openmrs TestOrderLocation table</comment>
        <createTable tableName="lb_test_order_location">
            <column name="test_order_location_id" type="INTEGER"/>
            <column name="concept_id" type="INTEGER"/>
            <column name="location_id" type="INTEGER"/>
             <column name="created_by" type="INTEGER"/>
              <column name="created_on" type="DATETIME"/>
        </createTable>
        <addPrimaryKey columnNames="id" tableName="test_order_location"/>
        <addForeignKeyConstraint
                baseTableName="test_order_location"
                baseColumnNames="concept_id"
                constraintName="test_order_location_concept_id_fk"
                referencedTableName="concept"
                referencedColumnNames="concept_id"/>
        <addForeignKeyConstraint
                baseTableName="test_order_location"
                baseColumnNames="location_id"
                constraintName="test_order_location_location_id_fk"
                referencedTableName="location"
                referencedColumnNames="location_id"/>
        <addForeignKeyConstraint
                baseTableName="test_order_location"
                baseColumnNames="created_by"
                constraintName="test_order_location_created_by_fk"
                referencedTableName="users"
                referencedColumnNames="user_id"/>        

    </changeSet>

    <changeSet id="add_concept_id_column_to_lb_test_allocation" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="concept_id" tableName="lb_test_allocation"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_test_allocation" >
            <column name="concept_id" type="INTEGER"/>
        </addColumn>
    </changeSet>

    <changeSet id="add_version_column_to_lb_test_time_configuration" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="version" tableName="lb_test_time_configuration"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_test_time_configuration" >
            <column name="version" type="TEXT">
                <constraints nullable="true"></constraints>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="add_version_column_to_lb_test_ranges_configuration" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="version" tableName="lb_test_ranges_configuration"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_test_ranges_configuration" >
            <column name="version" type="TEXT">
                <constraints nullable="true"></constraints>
            </column>
        </addColumn>
    </changeSet>


    <changeSet id="add_sample_reserved_lables" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_sample_reserved_values"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_sample_reserved_values table</comment>
        <createTable tableName="lb_sample_reserved_values">
            <column autoIncrement="true" name="id" type="INTEGER">
                <constraints nullable="false" primaryKey="true" primaryKeyName="lb_sample_reserved_values_id_pk"/>
            </column>
            <column name="current_label" type="INTEGER">
                <constraints nullable="false"></constraints>
            </column>
            <column name="time_reserved" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="add_tat_columns_to_lb_test_results" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="version" tableName="lb_test_result"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_test_result" >
            <column name="standard_tat" type="INTEGER">
                <constraints nullable="true"></constraints>
            </column>
            <column name="urgent_tat" type="INTEGER">
                <constraints nullable="true"></constraints>
            </column>
            <column name="additional_request_time_limit" type="INTEGER">
                <constraints nullable="true"></constraints>
            </column>
        </addColumn>
    </changeSet>


    <changeSet author="jesse-justin" id="dh_transaction" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="dh_transaction" />
            </not>
        </preConditions>
        <comment>Creating openmrs dh_transaction table v2</comment>
        <createTable tableName="dh_transaction">
            <column autoIncrement="true" name ="add_dhis_transaction_table" type="INTEGER">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_dh_transaction"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="dh_report_name" type="TEXT"/>
            <column name="dh_report_id" type="VARCHAR(100)"/>
            <column name="dh_report_period" type="VARCHAR(50)"/>
            <column name="dh_report_payload" type="TEXT"/>
            <column name="dh_report_response" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN"/>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="dh_transaction"
                constraintName="dh_transaction_changed_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="dh_transaction"
                constraintName="dh_transaction_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>
    </changeSet>

    <changeSet  author="jesse-justin"  id="rename_column_add_dhis_transaction_table" dbms="mysql">
        <renameColumn
                columnDataType="int"
                newColumnName="dh_transaction_id"
                oldColumnName="add_dhis_transaction_table"
                tableName="dh_transaction"/>
    </changeSet>

    <changeSet author="jesse-justin" id="add_dh_event_transaction" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="dh_event_transaction" />
            </not>
        </preConditions>
        <comment>Creating openmrs dh_event_transaction table</comment>
        <createTable tableName="dh_event_transaction">
            <column autoIncrement="true" name ="dh_event_transaction_id" type="INTEGER">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_dh_event_transaction"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="dh_event_identifier" type="TEXT"/>
            <column name="dh_event_program" type="TEXT"/>
            <column name="dh_event_date" type="DATE"/>
            <column name="dh_event_payload" type="TEXT"/>
            <column name="dh_event_response" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN"/>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="dh_event_transaction"
                constraintName="dh_event_transaction_changed_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="dh_event_transaction"
                constraintName="dh_event_transaction_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>
    </changeSet>

    <changeSet id="add_creator_column_to_lb_test_result" author="jesse-justin" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="creator" tableName="lb_test_result"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_test_result" >
            <column name="creator" type="INTEGER"></column>
        </addColumn>
        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_test_result"
                constraintName="lb_test_result_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>
    </changeSet>

    <changeSet id="create_st_order_status" author="vincent-minde" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_order_status"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_order_status table</comment>
        <createTable tableName="st_order_status">
            <column name="order_status_id" type="INTEGER" autoIncrement="true">
                <constraints nullable="false" primaryKeyName="order_status_id_pk" primaryKey="true"/>
            </column>
            <column name="order_id" type="INTEGER">
                <constraints nullable="false"></constraints>
            </column>
            <column name="status" type="VARCHAR(32)"/>
            <column name="remarks" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_order_status"
                constraintName="st_order_status_changed_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_order_status"
                constraintName="st_order_status_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseTableName="st_order_status"
                baseColumnNames="order_id"
                constraintName="st_order_status_order_order_id"
                referencedTableName="orders"
                referencedColumnNames="order_id"/>
    </changeSet>
    <changeSet id="add_visit_column_bl_invoice" author="vincent-minde" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="visit_id" tableName="bl_invoice"/>
            </not>
        </preConditions>
        <addColumn tableName="bl_invoice" >
            <column name="visit_id" type="int" />
        </addColumn>
<!--        <sql>-->
<!--            UPDATE bl_invoice i-->
<!--            INNER JOIN bl_invoice_item ii ON(ii.invoice_id=i.invoice_id)-->
<!--            INNER JOIN orders o ON(o.order_id=ii.order_id)-->
<!--            INNER JOIN encounter e ON(e.encounter_id=o.encounter_id)-->
<!--            INNER JOIN visit v ON(v.visit_id=e.visit_id)-->
<!--            SET i.visit_id = v.visit_id;-->
<!--        </sql>-->
<!--        <addForeignKeyConstraint-->
<!--                baseColumnNames="visit_id"-->
<!--                baseTableName="bl_invoice"-->
<!--                constraintName="bl_invoice_visit_id_visit_visit_id_fk"-->
<!--                referencedColumnNames="visit_id"-->
<!--                referencedTableName="visit"/>-->
<!--        <dropColumn columnName="patient_id"-->
<!--                     tableName="bl_invoice"/>-->
    </changeSet>
    <changeSet id="update_visit_id_in_bl_invoice" author="vincent-minde" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <foreignKeyConstraintExists foreignKeyName="bl_invoice_visit_id_visit_visit_id_fk"/>
            </not>
        </preConditions>
        <sql>
            UPDATE bl_invoice i
            INNER JOIN bl_invoice_item ii ON(ii.invoice_id=i.invoice_id)
            INNER JOIN orders o ON(o.order_id=ii.order_id)
            INNER JOIN encounter e ON(e.encounter_id=o.encounter_id)
            INNER JOIN visit v ON(v.visit_id=e.visit_id)
            SET i.visit_id = v.visit_id;
        </sql>
        <!--        <dropColumn columnName="patient_id"-->
        <!--                     tableName="bl_invoice"/>-->
    </changeSet>
    <changeSet id="add_visit_column_foreign_key_constraint_bl_invoice" author="vincent-minde" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <foreignKeyConstraintExists foreignKeyName="bl_invoice_visit_id_visit_visit_id_fk"/>
            </not>
        </preConditions>
        <addForeignKeyConstraint
                        baseColumnNames="visit_id"
                        baseTableName="bl_invoice"
                        constraintName="bl_invoice_visit_id_visit_visit_id_fk"
                        referencedColumnNames="visit_id"
                        referencedTableName="visit"/>
                <dropColumn columnName="patient_id"
                             tableName="bl_invoice"/>
    </changeSet>
    <changeSet author="vincent_minde" id="create_prescription">
        <createTable tableName="prescription">
            <column defaultValueNumeric="0" name="order_id" type="INT">
                <constraints primaryKey="true"/>
            </column>
            <column name="drug_inventory_id" type="INT"/>
            <column name="dose" type="DOUBLE"/>
            <column name="dosing_type" type="VARCHAR(255)"/>
            <column name="quantity" type="DOUBLE"/>
            <column name="dosing_instructions" type="TEXT"/>
            <column name="duration" type="INT"/>
            <column name="duration_units" type="INT"/>
            <column name="quantity_units" type="INT"/>
            <column name="route" type="INT"/>
            <column name="dose_units" type="INT"/>
            <column name="frequency" type="INT"/>
        </createTable>
    </changeSet>

    <changeSet id="add_is_full_exempted_column_to_bl_discount" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="is_full_exempted" tableName="bl_discount"/>
            </not>
        </preConditions>
        <addColumn tableName="bl_discount" >
            <column name="is_full_exempted" defaultValueBoolean="false" type="BOOLEAN"/>
        </addColumn>
    </changeSet>

    <changeSet id="update_attachment_column_to_bl_discount" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE bl_discount MODIFY COLUMN attachment_id VARCHAR(100)
        </sql>
    </changeSet>

    <changeSet id="add_columns_to_sample_status" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="category" tableName="lb_sample_status"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_sample_status" >
            <column name="category" type="VARCHAR(30)">
                <constraints nullable="true"></constraints>
            </column>
            <column name="retired" type="BOOLEAN" defaultValueBoolean="false" />
        </addColumn>
    </changeSet>

    <changeSet id="add_columns_to_test_allocation_status" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="category" tableName="lb_test_allocation_status"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_test_allocation_status" >
            <column name="category" type="VARCHAR(30)">
                <constraints nullable="true"></constraints>
            </column>
            <column name="retired" type="BOOLEAN" defaultValueBoolean="false" />
        </addColumn>
    </changeSet>

    <changeSet id="add_columns_to_lb_test_allocation_status" author="josephat-mwakyusa" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="test_result_id" tableName="lb_test_allocation_status"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_test_allocation_status" >
            <column name="test_result_id" type="INTEGER">
                <constraints nullable="true"></constraints>
            </column>
        </addColumn>
        <addForeignKeyConstraint
                baseColumnNames="test_result_id"
                baseTableName="lb_test_allocation_status"
                constraintName="lb_test_allocation_status_test_result_id_fk"
                referencedColumnNames="test_result_id"
                referencedTableName="lb_test_result"/>
    </changeSet>

    <changeSet id="update_primary_key_for_st_issue_item" author="dennis-kibahila" dbms="mysql">

        <sql>
            ALTER TABLE st_issue_item DROP PRIMARY KEY, ADD PRIMARY KEY(issue_id,item_id,batch_no)
        </sql>

    </changeSet>

    <changeSet id="update_status_column_to_lb_sample_status" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_sample_status MODIFY COLUMN status VARCHAR(100)
        </sql>
    </changeSet>

    <changeSet id="update_primary_key_for_st_receipt_item" author="dennis-kibahila" dbms="mysql">

        <sql>
            ALTER TABLE st_receipt_item DROP PRIMARY KEY, ADD PRIMARY KEY(receipt_id,item_id,batch_no)
        </sql>

    </changeSet>

    <changeSet id="add_location_column_to_lb_sample" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="location_id" tableName="lb_sample"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_sample" >
            <column name="location_id" type="INT">
                <constraints nullable="true"></constraints>
            </column>

        </addColumn>

        <addForeignKeyConstraint
                baseColumnNames="location_id"
                baseTableName="lb_sample"
                constraintName="lb_sample_result_location_id_location_location_id_fk"
                referencedColumnNames="location_id"
                referencedTableName="location"/>
    </changeSet>

    <changeSet id="create_lb_batch_set" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_batch_set"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_batch_set table</comment>
        <createTable tableName="lb_batch_set">
            <column name="batch_set_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="batch_set_id_pk"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="label" type="TEXT"/>
            <column name="name" type="TEXT"/>
            <column name="description" type="TEXT"/>
            <column name="fields" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_batch_set"
                constraintName="lb_batch_set_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_batch_set"
                constraintName="lb_batch_set_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>
    </changeSet>

    <changeSet id="create_lb_batch" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_batch"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_batch table</comment>
        <createTable tableName="lb_batch">
            <column name="batch_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="batch_set_id_pk"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="label" type="TEXT"/>
            <column name="name" type="TEXT"/>
            <column name="description" type="TEXT"/>
            <column name="fields" type="TEXT"/>
            <column name="batch_set_id" type="INTEGER">
                <constraints nullable="true"></constraints>
            </column>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_batch"
                constraintName="lb_batch_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_batch"
                constraintName="lb_batch_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="batch_set_id"
                baseTableName="lb_batch"
                constraintName="lb_batch_batch_set_id_lb_batch_set_batch_set_id_fk"
                referencedColumnNames="batch_set_id"
                referencedTableName="lb_batch_set"/>
    </changeSet>

    <changeSet id="create_lb_batch_set_status" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_batch_set_status"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_batch_set_status table</comment>
        <createTable tableName="lb_batch_set_status">
            <column name="batch_set_status_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="batch_set_status_id_pk"/>
            </column>
            <column name="batch_set_id" type="INTEGER"/>
            <column name="user_id" type="INTEGER"/>
            <column name="remarks" type="TEXT"/>
            <column name="timestamp" type="DATETIME"/>
            <column name="status" type="VARCHAR(30)"/>
            <column name="category" type="VARCHAR(30)">
                <constraints nullable="true"></constraints>
            </column>
            <column name="retired" type="BOOLEAN" defaultValueBoolean="false" />
        </createTable>
        <addForeignKeyConstraint
                baseTableName="lb_batch_set_status"
                baseColumnNames="batch_set_id"
                constraintName="lb_batch_set_status_lb_batch_set_id"
                referencedTableName="lb_batch_set"
                referencedColumnNames="batch_set_id"/>

        <addForeignKeyConstraint
                baseTableName="lb_batch_set_status"
                baseColumnNames="user_id"
                constraintName="lb_batch_set_status_user_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>
    </changeSet>

    <changeSet id="create_lb_batch_status" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_batch_status"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_batch_status table</comment>
        <createTable tableName="lb_batch_status">
            <column name="batch_status_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="batch_set_status_id_pk"/>
            </column>
            <column name="batch_id" type="INTEGER"/>
            <column name="user_id" type="INTEGER"/>
            <column name="remarks" type="TEXT"/>
            <column name="timestamp" type="DATETIME"/>
            <column name="status" type="VARCHAR(30)"/>
            <column name="category" type="VARCHAR(30)">
                <constraints nullable="true"></constraints>
            </column>
            <column name="retired" type="BOOLEAN" defaultValueBoolean="false" />
        </createTable>
        <addForeignKeyConstraint
                baseTableName="lb_batch_status"
                baseColumnNames="batch_id"
                constraintName="lb_batch_status_lb_batch_batch_id"
                referencedTableName="lb_batch"
                referencedColumnNames="batch_id"/>

        <addForeignKeyConstraint
                baseTableName="lb_batch_status"
                baseColumnNames="user_id"
                constraintName="lb_batch_status_user_id_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>
    </changeSet>

    <changeSet id="add_batch_column_to_lb_sample" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="batch_id" tableName="lb_sample"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_sample" >
            <column name="batch_id" type="INT">
                <constraints nullable="true"></constraints>
            </column>

        </addColumn>

        <addForeignKeyConstraint
                baseColumnNames="batch_id"
                baseTableName="lb_sample"
                constraintName="lb_sample_batch_id_lb_batch_batch_id_fk"
                referencedColumnNames="batch_id"
                referencedTableName="lb_batch"/>
    </changeSet>

    <changeSet id="create_lb_worksheet" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_worksheet"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_worksheet table</comment>
        <createTable tableName="lb_worksheet">
            <column name="worksheet_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="worksheet_id_pk"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="code" type="TEXT"/>
            <column name="description" type="TEXT"/>
            <column name="rows" type="INTEGER"/>
            <column name="columns" type="INTEGER"/>
            <column name="test_order_id" type="INTEGER"/>
            <column name="instrument_id" type="INTEGER"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="retired" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_retired" type="DATE"/>
            <column name="retired_by" type="INTEGER"/>
            <column name="retire_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_worksheet"
                constraintName="lb_worksheet_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_worksheet"
                constraintName="lb_worksheet_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="test_order_id"
                baseTableName="lb_worksheet"
                constraintName="lb_worksheet_test_order_id_concept_concept_id_fk"
                referencedColumnNames="concept_id"
                referencedTableName="concept"/>

        <addForeignKeyConstraint
                baseColumnNames="instrument_id"
                baseTableName="lb_worksheet"
                constraintName="lb_worksheet_instrument_id_concept_concept_id_fk"
                referencedColumnNames="concept_id"
                referencedTableName="concept"/>
    </changeSet>

    <changeSet id="create_lb_worksheet_definition" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_worksheet_definition"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_worksheet_definition table</comment>
        <createTable tableName="lb_worksheet_definition">
            <column name="worksheet_definition_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="worksheet_definition_id_pk"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="code" type="TEXT"/>
            <column name="worksheet_id" type="INTEGER"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_worksheet_definition"
                constraintName="lb_worksheet_definition_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_worksheet_definition"
                constraintName="lb_worksheet_definition_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="worksheet_id"
                baseTableName="lb_worksheet_definition"
                constraintName="lb_worksheet_definition_worksheet_id_concept_concept_id_fk"
                referencedColumnNames="concept_id"
                referencedTableName="concept"/>

    </changeSet>

    <changeSet id="add_columns_to_lb_worksheet_definition" author="josephat-mwakyusa" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="expiration_date_time" tableName="lb_worksheet_definition"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_worksheet_definition" >
            <column name="expiration_date_time" type="DATETIME">
                <constraints nullable="true"></constraints>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="create_lb_worksheet_control" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_worksheet_control"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_worksheet_control table</comment>
        <createTable tableName="lb_worksheet_control">
            <column name="worksheet_control_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="worksheet_control_id_pk"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="code" type="TEXT"/>
            <column name="name" type="TEXT"/>
            <column name="test_order_id" type="INTEGER"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="retired" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_retired" type="DATE"/>
            <column name="retired_by" type="INTEGER"/>
            <column name="retire_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_worksheet_control"
                constraintName="lb_worksheet_control_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_worksheet_control"
                constraintName="lb_worksheet_control_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="test_order_id"
                baseTableName="lb_worksheet_control"
                constraintName="lb_worksheet_control_test_order_id_concept_concept_id_fk"
                referencedColumnNames="concept_id"
                referencedTableName="concept"/>

    </changeSet>

    <changeSet id="create_lb_worksheet_sample" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_worksheet_sample"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_worksheet_sample table</comment>
        <createTable tableName="lb_worksheet_sample">
            <column name="worksheet_sample_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="worksheet_sample_id_pk"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="code" type="TEXT"/>
            <column name="worksheet_definition_id" type="INTEGER"/>
            <column name="row" type="INTEGER"/>
            <column name="column" type="INTEGER"/>
            <column name="sample_id" type="INTEGER">
                <constraints nullable="true"></constraints>
            </column>
            <column name="control_id" type="INTEGER">
                <constraints nullable="true"></constraints>
            </column>
            <column name="type" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_worksheet_sample"
                constraintName="lb_worksheet_sample_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_worksheet_sample"
                constraintName="lb_worksheet_sample_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="worksheet_definition_id"
                baseTableName="lb_worksheet_sample"
                constraintName="lb_sheet_sample_sheet_dfn_id_sheet_dfn_sheet_dfn_id_fk"
                referencedColumnNames="worksheet_definition_id"
                referencedTableName="lb_worksheet_definition"/>

        <addForeignKeyConstraint
                baseColumnNames="sample_id"
                baseTableName="lb_worksheet_sample"
                constraintName="lb_worksheet_sample_sample_id_lb_sample_sample_id_fk"
                referencedColumnNames="worksheet_control_id"
                referencedTableName="lb_worksheet_control"/>

        <addForeignKeyConstraint
                baseColumnNames="control_id"
                baseTableName="lb_worksheet_sample"
                constraintName="lb_worksheet_control_control_id_lb_sample_sample_id_fk"
                referencedColumnNames="sample_id"
                referencedTableName="lb_sample"/>

    </changeSet>

    <changeSet id="create_lb_worksheet_sample_status" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_worksheet_sample_status"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_worksheet_sample_status table</comment>
        <createTable tableName="lb_worksheet_sample_status">
            <column name="worksheet_sample_status_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="worksheet_sample_status_id_pk"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="worksheet_sample_id" type="INTEGER"/>
            <column name="category" type="TEXT"/>
            <column name="status" type="TEXT"/>
            <column name="remarks" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_worksheet_sample_status"
                constraintName="lb_worksheet_sample_status_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_worksheet_sample_status"
                constraintName="lb_worksheet_sample_status_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="worksheet_sample_id"
                baseTableName="lb_worksheet_sample_status"
                constraintName="sheet_smpl_sts_sheet_smpl_id_sheet_smpl_sheet_smpl_id_fk"
                referencedColumnNames="worksheet_sample_id"
                referencedTableName="lb_worksheet_sample"/>


    </changeSet>

    <changeSet id="create_lb_worksheet_status" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_worksheet_status"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_worksheet_sample_status table</comment>
        <createTable tableName="lb_worksheet_status">
            <column name="worksheet_status_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="worksheet_sample_status_id_pk"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="worksheet_id" type="INTEGER"/>
            <column name="category" type="TEXT"/>
            <column name="status" type="TEXT"/>
            <column name="remarks" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_worksheet_status"
                constraintName="lb_worksheet_status_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_worksheet_status"
                constraintName="lb_worksheet_status_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="worksheet_id"
                baseTableName="lb_worksheet_status"
                constraintName="lb_sheet_status_sheet_id_lb_sheet_sheet_id_fk"
                referencedColumnNames="worksheet_id"
                referencedTableName="lb_worksheet"/>

    </changeSet>

    <changeSet id="update_lb_worksheet_add_column_name" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_worksheet
            ADD COLUMN name VARCHAR(50) AFTER code;
        </sql>
    </changeSet>

    <changeSet id="update_lb_worksheet_control_add_column_description" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_worksheet_control
            ADD COLUMN description VARCHAR(50) AFTER name;
        </sql>
    </changeSet>

    <changeSet id="update_lb_worksheet_definition_add_column_header_fields" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_worksheet_definition
            ADD COLUMN header_fields TEXT(100000) AFTER code;
        </sql>
    </changeSet>

    <!-- column name was a mysqlkeyword -->
    <changeSet id="update_lb_worksheet_sample_rename_row_to_rows" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_worksheet_sample
            CHANGE row rows INT;
        </sql>
    </changeSet>

    <!-- column name was a mysql keyword -->
    <changeSet id="update_lb_worksheet_sample_rename_column_to_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_worksheet_sample
            CHANGE `column` `columns` INT;
        </sql>
    </changeSet>

    <!-- foreign key was wrongly referenced in lb_worksheet_sample -->
    <changeSet id="update_lb_worksheet_sample_change_sample_id_foreign_key" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_worksheet_sample DROP FOREIGN KEY lb_worksheet_sample_sample_id_lb_sample_sample_id_fk,
            ADD FOREIGN KEY lb_worksheet_sample_sample_id_lb_sample_sample_id_fk(sample_id) REFERENCES lb_sample(sample_id);
        </sql>
    </changeSet>
    <!-- For worksheet control -->
    <changeSet id="update_lb_worksheet_sample_change_control_id_foreign_key" author="josephat-mwakyusa" dbms="mysql">
        <sql>
            ALTER TABLE lb_worksheet_sample DROP FOREIGN KEY lb_worksheet_control_control_id_lb_sample_sample_id_fk,
            ADD FOREIGN KEY control_id_lb_worksheet_control_control_id_fk(control_id) REFERENCES lb_worksheet_control(worksheet_control_id);
        </sql>
    </changeSet>

    <!-- foreign key was wrongly referenced in lb_worksheet_definition -->
    <changeSet id="update_lb_worksheet_definition_change_worksheet_id_foreign_key" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_worksheet_definition DROP FOREIGN KEY lb_worksheet_definition_worksheet_id_concept_concept_id_fk,
            ADD FOREIGN KEY lb_worksheet_definition_worksheet_id_worksheet_worksheet_id_fk(worksheet_id) REFERENCES lb_worksheet(worksheet_id);
        </sql>
    </changeSet>

    <changeSet id="update_lb_sample_drop_foreign_key_batch_id" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_sample DROP FOREIGN KEY lb_sample_batch_id_lb_batch_batch_id_fk
        </sql>
    </changeSet>

    <changeSet id="update_lb_sample_drop_column_batch_id" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_sample DROP COLUMN batch_id;
        </sql>
    </changeSet>

    <changeSet id="create_lb_batch_sample" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_batch_sample"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_batch_sample table</comment>
        <createTable tableName="lb_batch_sample">
            <column name="batch_sample_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="batch_sample_id_pk"/>
            </column>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
            <column name="code" type="TEXT"/>
            <column name="batch_id" type="INTEGER"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_batch_sample"
                constraintName="lb_batch_sample_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_batch_sample"
                constraintName="lb_batch_sample_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="batch_id"
                baseTableName="lb_batch_sample"
                constraintName="lb_batch_sample_batch_id_lb_batch_fk"
                referencedColumnNames="batch_id"
                referencedTableName="lb_batch"/>

    </changeSet>

    <changeSet id="add_batch_sample_column_to_lb_sample" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="batch_sample_id" tableName="lb_sample"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_sample" >
            <column name="batch_sample_id" type="INT">
                <constraints nullable="true"></constraints>
            </column>

        </addColumn>

        <addForeignKeyConstraint
                baseColumnNames="batch_sample_id"
                baseTableName="lb_sample"
                constraintName="lb_sample_batch_sample_id_lb_batch_sample_fk"
                referencedColumnNames="batch_sample_id"
                referencedTableName="lb_batch_sample"/>
    </changeSet>

    <changeSet id="create_st_supplier" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_supplier"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_supplier table</comment>
        <createTable tableName="st_supplier">
            <column name="supplier_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="supplier_id_pk"/>
            </column>
            <column name="name" type="TEXT"/>
            <column name="description" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_supplier"
                constraintName="st_supplier_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_supplier"
                constraintName="st_supplier_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

    </changeSet>

    <changeSet id="create_st_supplier_attribute_type" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_supplier_attribute_type"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_supplier_attribute_type table</comment>
        <createTable tableName="st_supplier_attribute_type">
            <column name="supplier_attribute_type_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="supplier_attribute_type_id_pk"/>
            </column>
            <column name="name" type="TEXT"/>
            <column name="description" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="retired" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_retired" type="DATE"/>
            <column name="retired_by" type="INTEGER"/>
            <column name="retired_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_supplier_attribute_type"
                constraintName="st_supplier_attr_type_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_supplier_attribute_type"
                constraintName="st_supplier_attr_type_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

    </changeSet>

    <changeSet id="create_st_supplier_attribute" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_supplier_attribute"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_supplier_attribute table</comment>
        <createTable tableName="st_supplier_attribute">
            <column name="supplier_attribute_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="supplier_attribute_id_pk"/>
            </column>
            <column name="supplier_id" type="INTEGER"/>
            <column name="supplier_attribute_type_id" type="INTEGER"/>
            <column name="value" type="char(38)"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_supplier_attribute"
                constraintName="st_supplier_attr_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_supplier_attribute"
                constraintName="st_supplier_attr_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="supplier_id"
                baseTableName="st_supplier_attribute"
                constraintName="st_supplier_attr_supplier_id_st_supplier_fk"
                referencedColumnNames="supplier_id"
                referencedTableName="st_supplier"/>

        <addForeignKeyConstraint
                baseColumnNames="supplier_attribute_type_id"
                baseTableName="st_supplier_attribute"
                constraintName="st_supplier_attr_supplier_attr_id_st_supplier_attr_fk"
                referencedColumnNames="supplier_attribute_type_id"
                referencedTableName="st_supplier_attribute_type"/>

    </changeSet>

    <changeSet id="create_st_purchase_order" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_purchase_order"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_purchase_order table</comment>
        <createTable tableName="st_purchase_order">
            <column name="purchase_order_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="purchase_order_id_pk"/>
            </column>
            <column name="code" type="CHAR(38)"/>
            <column name="description" type="CHAR(38)"/>
            <column name="order_date" type="DATE"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_purchase_order"
                constraintName="st_purchase_order_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_purchase_order"
                constraintName="st_purchase_order_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

    </changeSet>

    <changeSet id="create_st_purchase_order_item" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_purchase_order_item"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_purchase_order_item table</comment>
        <createTable tableName="st_purchase_order_item">
            <column name="purchase_order_item_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="purchase_order_item_id_pk"/>
            </column>
            <column name="item_id" type="INTEGER"/>
            <column name="quantity" type="INTEGER"/>
            <column name="purchase_order_id" type="INTEGER"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_purchase_order_item"
                constraintName="st_purchase_order_item_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_purchase_order_item"
                constraintName="st_purchase_order_item_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="purchase_order_id"
                baseTableName="st_purchase_order_item"
                constraintName="st_purchase_order_item_purchase_order_id_purchase_order_fk"
                referencedColumnNames="purchase_order_id"
                referencedTableName="st_purchase_order"/>

        <addForeignKeyConstraint
                baseColumnNames="item_id"
                baseTableName="st_purchase_order_item"
                constraintName="st_purchase_order_item_item_id_item_fk"
                referencedColumnNames="item_id"
                referencedTableName="item"/>

    </changeSet>

    <changeSet id="create_st_purchase_order_status" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_purchase_order_status"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_purchase_order_item table</comment>
        <createTable tableName="st_purchase_order_status">
            <column name="purchase_order_status_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="purchase_order_status_id_pk"/>
            </column>
            <column name="purchase_order_id" type="INTEGER"/>
            <column name="status" type="TEXT"/>
            <column name="remarks" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_purchase_order_status"
                constraintName="st_purchase_order_status_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_purchase_order_status"
                constraintName="st_purchase_order_status_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="purchase_order_id"
                baseTableName="st_purchase_order_status"
                constraintName="st_purchase_order_status_purchase_order_id_purchase_order_fk"
                referencedColumnNames="purchase_order_id"
                referencedTableName="st_purchase_order"/>

    </changeSet>


    <changeSet id="create_st_stock_invoice" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_stock_invoice"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_stock_invoice table</comment>
        <createTable tableName="st_stock_invoice">
            <column name="stock_invoice_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="stock_invoice_id_pk"/>
            </column>
            <column name="invoice_number" type="CHAR(38)"/>
            <column name="supplier_id" type="INTEGER"/>
            <column name="purchase_order_id" type="INTEGER">
                <constraints nullable="true"></constraints>
            </column>
            <column name="receiving_date" type="DATE"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_stock_invoice"
                constraintName="st_stock_invoice_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_stock_invoice"
                constraintName="st_stock_invoice_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="supplier_id"
                baseTableName="st_stock_invoice"
                constraintName="st_stock_invoice_supplier_id_supplier_fk"
                referencedColumnNames="supplier_id"
                referencedTableName="st_supplier"/>

        <addForeignKeyConstraint
                baseColumnNames="purchase_order_id"
                baseTableName="st_stock_invoice"
                constraintName="st_stock_invoice_purchase_order_id_st_purchase_order_fk"
                referencedColumnNames="purchase_order_id"
                referencedTableName="st_purchase_order"/>

    </changeSet>

    <changeSet id="create_st_stock_invoice_attribute_type" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_stock_invoice_attribute_type"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_stock_invoice_attribute_type table</comment>
        <createTable tableName="st_stock_invoice_attribute_type">
            <column name="stock_invoice_attribute_type_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="stock_invoice_attribute_type_id_pk"/>
            </column>
            <column name="name" type="TEXT"/>
            <column name="description" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="retired" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_retired" type="DATE"/>
            <column name="retired_by" type="INTEGER"/>
            <column name="retired_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_stock_invoice_attribute_type"
                constraintName="st_stock_invoice_attr_type_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_stock_invoice_attribute_type"
                constraintName="st_stock_invoice_attr_type_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

    </changeSet>

    <changeSet id="create_st_stock_invoice_attribute" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_stock_invoice_attribute"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_supplier_attribute table</comment>
        <createTable tableName="st_stock_invoice_attribute">
            <column name="stock_invoice_attribute_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="stock_invoice_attribute_id_pk"/>
            </column>
            <column name="stock_invoice_id" type="INTEGER"/>
            <column name="stock_invoice_attribute_type_id" type="INTEGER"/>
            <column name="value" type="char(38)"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_stock_invoice_attribute"
                constraintName="st_stock_invoice_attr_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_supplier_attribute"
                constraintName="st_stock_invoice_attr_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="stock_invoice_id"
                baseTableName="st_stock_invoice_attribute"
                constraintName="st_stock_invoice_attr_stock_invoice_id_st_stock_invoice_fk"
                referencedColumnNames="stock_invoice_id"
                referencedTableName="st_stock_invoice"/>

        <addForeignKeyConstraint
                baseColumnNames="stock_invoice_attribute_type_id"
                baseTableName="st_stock_invoice_attribute"
                constraintName="st_stock_invoice_attr_invoice_attr_type_id_st_stock_inv_attr_fk"
                referencedColumnNames="stock_invoice_attribute_type_id"
                referencedTableName="st_stock_invoice_attribute_type"/>

    </changeSet>

    <changeSet id="create_st_stock_invoice_item" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_stock_invoice_item"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_stock_invoice_item table</comment>
        <createTable tableName="st_stock_invoice_item">
            <column name="stock_invoice_item_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="stock_invoice_item_id_pk"/>
            </column>
            <column name="stock_invoice_id" type="INTEGER"/>
            <column name="item_id" type="INTEGER"/>
            <column name="batch_no" type="char(38)"/>
            <column name="order_quantity" type="INTEGER"/>
            <column name="batch_quantity" type="INTEGER"/>
            <column name="expiry_date" type="DATE"/>
            <column name="uom" type="INTEGER"/>
            <column name="unit_price" type="DOUBLE"/>
            <column name="amount" type="DOUBLE"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_stock_invoice_item"
                constraintName="st_stock_invoice_item_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_stock_invoice_item"
                constraintName="st_stock_invoice_item_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="stock_invoice_id"
                baseTableName="st_stock_invoice_item"
                constraintName="st_stock_invoice_item_st_inv_id_stock_invoice_fk"
                referencedColumnNames="stock_invoice_id"
                referencedTableName="st_stock_invoice"/>

        <addForeignKeyConstraint
                baseColumnNames="uom"
                baseTableName="st_stock_invoice_item"
                constraintName="st_stock_invoice_item_uom_concept_fk"
                referencedColumnNames="concept_id"
                referencedTableName="concept"/>

    </changeSet>

    <changeSet id="create_st_stock_invoice_status" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_stock_invoice_status"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_stock_invoice_status table</comment>
        <createTable tableName="st_stock_invoice_status">
            <column name="stock_invoice_status_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="stock_invoice_status_id_pk"/>
            </column>
            <column name="stock_invoice_id" type="INTEGER"/>
            <column name="status" type="TEXT"/>
            <column name="remarks" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_stock_invoice_status"
                constraintName="st_stock_invoice_status_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_stock_invoice_status"
                constraintName="st_stock_invoice_status_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="stock_invoice_id"
                baseTableName="st_stock_invoice_status"
                constraintName="st_stock_invoice_status_st_invoice_id_st_stock_invoice_fk"
                referencedColumnNames="stock_invoice_id"
                referencedTableName="st_stock_invoice"/>

    </changeSet>

    <changeSet id="create_st_stock_invoice_item_status" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_stock_invoice_item_status"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_stock_invoice_status table</comment>
        <createTable tableName="st_stock_invoice_item_status">
            <column name="stock_invoice_item_status_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="stock_invoice_item_status_id_pk"/>
            </column>
            <column name="stock_invoice_item_id" type="INTEGER"/>
            <column name="status" type="TEXT"/>
            <column name="remarks" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_stock_invoice_item_status"
                constraintName="st_stock_invoice_item_status_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_stock_invoice_item_status"
                constraintName="st_stock_invoice_item_status_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="stock_invoice_item_id"
                baseTableName="st_stock_invoice_item_status"
                constraintName="st_stock_invoice_item_status_st_invoice_id_st_stock_invoice_fk"
                referencedColumnNames="stock_invoice_item_id"
                referencedTableName="st_stock_invoice_item"/>

    </changeSet>

    <changeSet id="update_st_stock_invoice_item_add_column_location" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_stock_invoice_item
            ADD COLUMN location_id INT,
            ADD FOREIGN KEY(location_id) REFERENCES location(location_id);
        </sql>
    </changeSet>

    <changeSet id="create_lb_associated_field" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_associated_field"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_associated_field table</comment>
        <createTable tableName="lb_associated_field">
            <column name="associated_field_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="associated_field_id_pk"/>
            </column>
            <column name="name" type="TEXT"/>
            <column name="description" type="TEXT"/>
            <column name="field_type" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATETIME"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATETIME"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>

        </createTable>
        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_associated_field"
                constraintName="lb_associated_field_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_associated_field"
                constraintName="lb_associated_field_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="voided_by"
                baseTableName="lb_associated_field"
                constraintName="lb_associated_field_voided_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>
    </changeSet>

    <changeSet id="add_columns_to_st_requisition_item" author="dennis-kibahila" dbms="mysql">
        <addColumn tableName="st_requisition_item" >
            <column name="creator" type="INTEGER"/>
            <column name="date_created"  type="DATETIME"/>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATETIME"/>
            <column name="voided" defaultValueBoolean="false" type="BOOLEAN"/>
            <column name="date_voided" type="DATETIME"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid"  type="char(38)" >
                <constraints nullable="true"  unique="true"></constraints>
            </column>

        </addColumn>
        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_requisition_item"
                constraintName="st_requisition_item_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_requisition_item"
                constraintName="st_requisition_item_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

    </changeSet>

    <changeSet id="create_lb_test_allocation_associated_field" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_test_allocation_associated_field"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_test_allocation_associated_field table</comment>
        <createTable tableName="lb_test_allocation_associated_field">
            <column name="test_allocation_associated_field_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="test_allocation_associated_field_id_pk"/>
            </column>
            <column name="test_allocation_id" type="INTEGER"/>
            <column name="associated_field_id" type="INTEGER"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATETIME"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATETIME"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_test_allocation_associated_field"
                constraintName="lb_alloc_field_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_test_allocation_associated_field"
                constraintName="lb_alloc_field_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="voided_by"
                baseTableName="lb_test_allocation_associated_field"
                constraintName="lb_alloc_field_voided_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="test_allocation_id"
                baseTableName="lb_test_allocation_associated_field"
                constraintName="lb_alloc_field_alloc_id_test_allocation_alloc_id_fk"
                referencedColumnNames="test_allocation_id"
                referencedTableName="lb_test_allocation"/>

        <addForeignKeyConstraint
                baseColumnNames="associated_field_id"
                baseTableName="lb_test_allocation_associated_field"
                constraintName="lb_alloc_field_assoc_field_associated_field_id_fk"
                referencedColumnNames="associated_field_id"
                referencedTableName="lb_associated_field"/>
    </changeSet>

    <changeSet id="create_lb_associated_field_result" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="lb_associated_field_result"/>
            </not>
        </preConditions>
        <comment>Creating openmrs lb_associated_fields_result table</comment>
        <createTable tableName="lb_associated_field_result">
            <column name="associated_field_result_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="associated_field_result_id_pk"/>
            </column>
            <column name="test_result_id" type="INTEGER"/>
            <column name="associated_field_id" type="INTEGER"/>
            <column name="value" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATETIME"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATETIME"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </createTable>
        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="lb_associated_field_result"
                constraintName="lb_assoc_field_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="lb_associated_field_result"
                constraintName="lb_assoc_field_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="voided_by"
                baseTableName="lb_associated_field_result"
                constraintName="lb_assoc_field_voided_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="associated_field_id"
                baseTableName="lb_associated_field_result"
                constraintName="lb_assoc_field_assoc_field_associated_field_id_fk"
                referencedColumnNames="associated_field_id"
                referencedTableName="lb_associated_field"/>

        <addForeignKeyConstraint
                baseColumnNames="test_result_id"
                baseTableName="lb_associated_field_result"
                constraintName="lb_assoc_field_test_result_id_lb_test_result_id_fk"
                referencedColumnNames="test_result_id"
                referencedTableName="lb_test_result"/>
    </changeSet>

    <changeSet id="update_st_transaction_add_column_source_location" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_transaction
            ADD COLUMN source_location_id INT AFTER transaction_type_id,
            ADD FOREIGN KEY(source_location_id) REFERENCES location(location_id);;
        </sql>
    </changeSet>

    <changeSet id="create_st_requisition_item_status" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_requisition_item_status"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_requisition_item_status table</comment>
        <createTable tableName="st_requisition_item_status">
            <column name="requisition_item_status_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="stock_requisition_item_status_id_pk"/>
            </column>
            <column name="item_id" type="INTEGER"/>
            <column name="requisition_id" type="INTEGER"/>
            <column name="status" type="TEXT"/>
            <column name="remarks" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATETIME"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATETIME"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_requisition_item_status"
                constraintName="st_requisition_item_status_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_requisition_item_status"
                constraintName="st_requisition_item_status_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="item_id"
                baseTableName="st_requisition_item_status"
                constraintName="st_requisition_item_status_item_fk"
                referencedColumnNames="item_id"
                referencedTableName="item"/>

        <addForeignKeyConstraint
                baseTableName="st_requisition_item_status"
                baseColumnNames="requisition_id"
                constraintName="st_requisition_item_status_st_requisition_requisition_id_fk"
                referencedTableName="st_requisition"
                referencedColumnNames="requisition_id"/>
    </changeSet>

    <changeSet id="update_st_requisition_add_column_code" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_requisition
            ADD COLUMN code VARCHAR(50) NULL AFTER requisition_id;
        </sql>
    </changeSet>

    <changeSet id="update_st_transaction_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_transaction
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_voided DATETIME;
        </sql>
    </changeSet>

    <changeSet id="update_lb_worksheet_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_worksheet
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_retired DATETIME;
        </sql>
    </changeSet>

    <changeSet id="update_lb_worksheet_control_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_worksheet_control
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_retired DATETIME;
        </sql>
    </changeSet>

    <changeSet id="update_lb_worksheet_sample_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_worksheet_sample
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_voided DATETIME;
        </sql>
    </changeSet>


    <changeSet id="update_lb_worksheet_sample_status_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_worksheet_sample_status
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_voided DATETIME;
        </sql>
    </changeSet>

    <changeSet id="update_lb_worksheet_status_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_worksheet_status
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_voided DATETIME;
        </sql>
    </changeSet>

    <changeSet id="update_lb_batch_sample_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_batch_sample
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_voided DATETIME;
        </sql>
    </changeSet>

    <changeSet id="update_st_requisition_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_requisition
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_voided DATETIME;
        </sql>
    </changeSet>

    <changeSet id="update_st_requisition_status_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_requisition_status
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_voided DATETIME;
        </sql>
    </changeSet>

    <changeSet id="update_st_stock_invoice_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_stock_invoice
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_voided DATETIME;
        </sql>
    </changeSet>

    <changeSet id="update_st_stock_invoice_attribute_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_stock_invoice_attribute
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_voided DATETIME;
        </sql>
    </changeSet>

    <changeSet id="update_st_stock_invoice_attribute_type_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_stock_invoice_attribute_type
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_retired DATETIME;
        </sql>
    </changeSet>

    <changeSet id="update_st_stock_invoice_item_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_stock_invoice_item
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_voided DATETIME;
        </sql>
    </changeSet>

    <changeSet id="update_st_stock_invoice_item_status_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_stock_invoice_item_status
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_voided DATETIME;
        </sql>
    </changeSet>

    <changeSet id="update_st_stock_invoice_status_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_stock_invoice_status
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_voided DATETIME;
        </sql>
    </changeSet>

    <changeSet id="update_st_supplier_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_supplier
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_voided DATETIME;
        </sql>
    </changeSet>

    <changeSet id="update_st_supplier_attribute_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_supplier_attribute
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_voided DATETIME;
        </sql>
    </changeSet>

    <changeSet id="update_st_supplier_attribute_type_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_supplier_attribute_type
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_retired DATETIME;
        </sql>
    </changeSet>

    <changeSet id="update_lb_batch_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_batch
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_voided DATETIME;
        </sql>
    </changeSet>

    <changeSet id="update_lb_batch_set_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_batch_set
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_voided DATETIME;
        </sql>
    </changeSet>

    <changeSet id="update_st_issue_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_issue
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_voided DATETIME;
        </sql>
    </changeSet>


    <changeSet id="update_st_issue_status_date_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_issue_status
            MODIFY date_created DATETIME,
            MODIFY date_changed DATETIME,
            MODIFY date_voided DATETIME;
        </sql>
    </changeSet>

    <changeSet id="create_st_issue_item_status" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="st_issue_item_status"/>
            </not>
        </preConditions>
        <comment>Creating openmrs st_issue_item_status table</comment>
        <createTable tableName="st_issue_item_status">
            <column name="issue_item_status_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="stock_issue_item_status_id_pk"/>
            </column>
            <column name="item_id" type="INTEGER"/>
            <column name="issue_id" type="INTEGER"/>
            <column name="batch_no" type="INTEGER"/>
            <column name="status" type="TEXT"/>
            <column name="remarks" type="TEXT"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATETIME">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATETIME"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATETIME"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_issue_item_status"
                constraintName="st_issue_item_status_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_issue_item_status"
                constraintName="st_issue_item_status_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="item_id"
                baseTableName="st_issue_item_status"
                constraintName="st_issue_item_status_item_fk"
                referencedColumnNames="item_id"
                referencedTableName="item"/>

        <addForeignKeyConstraint
                baseTableName="st_issue_item_status"
                baseColumnNames="issue_id"
                constraintName="st_issue_item_status_st_issue_issue_id_fk"
                referencedTableName="st_issue"
                referencedColumnNames="issue_id"/>
    </changeSet>

    <changeSet id="add_columns_to_st_issue_item" author="dennis-kibahila" dbms="mysql">
        <addColumn tableName="st_issue_item" >
            <column name="creator" type="INTEGER"/>
            <column name="date_created"  type="DATETIME"/>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATETIME"/>
            <column name="voided" defaultValueBoolean="false" type="BOOLEAN"/>
            <column name="date_voided" type="DATETIME"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid"  type="char(38)" >
                <constraints nullable="true"  unique="true"></constraints>
            </column>

        </addColumn>
        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_issue_item"
                constraintName="st_issue_item_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_requisition_item"
                constraintName="st_issue_item_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

    </changeSet>

    <changeSet id="update_st_supplier_add_location_column" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_supplier
            ADD COLUMN location_id INT AFTER description,
            ADD FOREIGN KEY(location_id) REFERENCES location(location_id);
        </sql>
    </changeSet>

    <changeSet id="update_st_transaction_add_column_destination_location" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_transaction
            ADD COLUMN destination_location_id INT AFTER source_location_id,
            ADD FOREIGN KEY(destination_location_id) REFERENCES location(location_id);
        </sql>
    </changeSet>

    <changeSet id="update_st_issue_item_status_batch_no_column" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_issue_item_status MODIFY COLUMN batch_no VARCHAR(32)
        </sql>
    </changeSet>

    <changeSet id="update_st_stock_invoice_modify_invoice_number_supplier_unique" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_stock_invoice
            ADD CONSTRAINT invoice_number_supplier_unique UNIQUE (invoice_number,supplier_id);
        </sql>
    </changeSet>

    <changeSet id="add_columns_to_st_reorder_level" author="dennis-kibahila" dbms="mysql">
        <addColumn tableName="st_reorder_level" >
            <column name="creator" type="INTEGER"/>
            <column name="date_created"  type="DATETIME"/>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATETIME"/>
            <column name="voided" defaultValueBoolean="false" type="BOOLEAN"/>
            <column name="date_voided" type="DATETIME"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid"  type="char(38)" >
                <constraints nullable="true"  unique="true"></constraints>
            </column>

        </addColumn>
        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="st_reorder_level"
                constraintName="st_reorder_level_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="st_reorder_level"
                constraintName="st_reorder_level_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

    </changeSet>

    <changeSet id="add_related_allocation_column_to_lb_test_allocation" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists columnName="related_allocation_uuid" tableName="lb_test_allocation"/>
            </not>
        </preConditions>
        <addColumn tableName="lb_test_allocation" >
            <column name="related_allocation_uuid" type="char(38)"/>
        </addColumn>
    </changeSet>

    <changeSet id="create_audit_log" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not><tableExists tableName="audit_log" /></not>
        </preConditions>
        <comment>Adding audit_log table</comment>
        <createTable tableName="audit_log">
            <column name="audit_log_id" type="int" autoIncrement="true" >
                <constraints nullable="false" primaryKey="true" />
            </column>
            <column name="type" type="varchar(512)"><constraints nullable="false" /></column>
            <column name="action" type="TEXT"><constraints nullable="false" /></column>
            <column name="user_id" type="int" />
            <column name="serialized_data" type="longblob" />
            <column name="date_created" type="DATETIME"><constraints nullable="false" /></column>
            <column name="parent_auditlog_id" type="int" />
            <column name="uuid" type="varchar(38)"><constraints nullable="false" unique="true" /></column>
        </createTable>
        <addForeignKeyConstraint
                constraintName="authenticated_user"
                baseTableName="audit_log" baseColumnNames="user_id"
                referencedTableName="users" referencedColumnNames="user_id" />
    </changeSet>

    <changeSet id="update_st_transaction_add_order_column" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE st_transaction
            ADD COLUMN order_id INT NULL AFTER transaction_id,
            ADD FOREIGN KEY(order_id) REFERENCES orders(order_id);
        </sql>
    </changeSet>

    <changeSet id="create_password_history" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not><tableExists tableName="password_history" /></not>
        </preConditions>
        <comment>Adding password_history table</comment>
        <createTable tableName="password_history">
            <column name="password_history_id" type="int" autoIncrement="true" >
                <constraints nullable="false" primaryKey="true" />
            </column>
            <column name="user_id" type="int" />
            <column name="password" type="varchar(128)"><constraints nullable="true" /></column>
            <column name="change_date" type="DATETIME"><constraints nullable="false" /></column>
        </createTable>
        <addForeignKeyConstraint
                constraintName="user_id"
                baseTableName="password_history" baseColumnNames="user_id"
                referencedTableName="users" referencedColumnNames="user_id" />
    </changeSet>

    <changeSet id="update_lb_test_result_add_column_tested_by" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_test_result
            ADD COLUMN tested_by INT NULL AFTER creator,
            ADD FOREIGN KEY(tested_by) REFERENCES users(user_id);
        </sql>
    </changeSet>
    <changeSet id="update_lb_test_result_add_column_tested_date" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_test_result
            ADD COLUMN date_tested DATETIME NULL AFTER tested_by;
        </sql>
    </changeSet>

    <changeSet id="update_lb_test_time_configuration" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_test_time_configuration
            ADD CONSTRAINT concept_id UNIQUE (concept_id);
        </sql>
    </changeSet>

    <changeSet id="update_lb_test_time_configuration_add_columns" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_test_time_configuration
            ADD COLUMN referral_tat BIGINT NULL AFTER urgent_tat,
            MODIFY COLUMN standard_tat BIGINT,
            MODIFY COLUMN urgent_tat BIGINT,
            ADD COLUMN config_type VARCHAR(20) NULL AFTER additional_request_time_limit;
        </sql>
    </changeSet>

    <changeSet id="update_lb_test_time_configuration_add_tat_column" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_test_time_configuration
            ADD COLUMN routine_config_type VARCHAR(20) NULL AFTER config_type,
            ADD COLUMN referral_config_type VARCHAR(20) NULL AFTER routine_config_type;
        </sql>
    </changeSet>

    <changeSet id="update_lb_test_time_config_rename_config_type" author="dennis-kibahila" dbms="mysql">
        <sql>
            ALTER TABLE lb_test_time_configuration
            CHANGE config_type urgent_config_type  VARCHAR(20);
        </sql>
    </changeSet>

    <changeSet id="create_encounter_patient_state" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="encounter_patient_state"/>
            </not>
        </preConditions>
        <comment>Creating openmrs encounter_patient_state table</comment>
        <createTable tableName="encounter_patient_state">
            <column name="encounter_patient_state_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="encounter_patient_state_id_pk"/>
            </column>
            <column name="encounter_id" type="INTEGER"/>
            <column name="patient_state_id" type="INTEGER"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="encounter_patient_state"
                constraintName="encounter_state_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="encounter_patient_state"
                constraintName="encounter_state_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="encounter_id"
                baseTableName="encounter_patient_state"
                constraintName="encounter_state_encounter_id_encounter_fk"
                referencedColumnNames="encounter_id"
                referencedTableName="encounter"/>

        <addForeignKeyConstraint
                baseColumnNames="patient_state_id"
                baseTableName="encounter_patient_state"
                constraintName="state_state_id_patient_state_fk"
                referencedColumnNames="patient_state_id"
                referencedTableName="patient_state"/>

    </changeSet>

    <changeSet id="create_encounter_patient_program" author="dennis-kibahila" dbms="mysql">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="encounter_patient_program"/>
            </not>
        </preConditions>
        <comment>Creating openmrs encounter_patient_program table</comment>
        <createTable tableName="encounter_patient_program">
            <column name="encounter_patient_program_id" type="INTEGER" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="encounter_patient_program_id_pk"/>
            </column>
            <column name="encounter_id" type="INTEGER"/>
            <column name="patient_program_id" type="INTEGER"/>
            <column name="creator" type="INTEGER"/>
            <column name="date_created" type="DATE">
                <constraints nullable="false"></constraints>
            </column>
            <column name="changed_by" type="INTEGER"/>
            <column name="date_changed" type="DATE"/>
            <column name="voided" type="BOOLEAN">
                <constraints nullable="false"></constraints>
            </column>
            <column name="date_voided" type="DATE"/>
            <column name="voided_by" type="INTEGER"/>
            <column name="void_reason" type="TEXT"/>
            <column name="uuid" type="char(38)">
                <constraints nullable="false" unique="true"></constraints>
            </column>
        </createTable>

        <addForeignKeyConstraint
                baseColumnNames="changed_by"
                baseTableName="encounter_patient_program"
                constraintName="encounter_program_changed_by_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="creator"
                baseTableName="encounter_patient_program"
                constraintName="encounter_program_creator_users_user_id_fk"
                referencedColumnNames="user_id"
                referencedTableName="users"/>

        <addForeignKeyConstraint
                baseColumnNames="encounter_id"
                baseTableName="encounter_patient_program"
                constraintName="encounter_program_encounter_id_encounter_fk"
                referencedColumnNames="encounter_id"
                referencedTableName="encounter"/>

        <addForeignKeyConstraint
                baseColumnNames="patient_program_id"
                baseTableName="encounter_patient_program"
                constraintName="program_program_id_patient_program_fk"
                referencedColumnNames="patient_program_id"
                referencedTableName="patient_program"/>

    </changeSet>


</databaseChangeLog>