<div
  *ngIf="{
    drugOrderFormsMetadata: drugOrderFormsMetadata$ | async,
    provider: provider$ | async,
    dispensingLocations: dispensingLocations$ | async
  } as params"
>
  <div *ngIf="!params?.drugOrderFormsMetadata || !params?.provider">
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
  </div>

  <app-drug-order-form
    *ngIf="params?.drugOrderFormsMetadata && params?.provider"
    [provider]="params?.provider"
    [drugOrderFormsMetadata]="params?.drugOrderFormsMetadata"
    [patient]="patient"
    [fromDispensing]="fromDispensing"
    [isFromDoctor]="isFromDoctor"
    (shouldFeedQuantity)="onCheckIfShouldFeedQuantity($event)"
    [dispensingLocations]="params?.dispensingLocations"
    (drugQuantity)="onChangeDrugQuantity($event)"
    (drugOrdered)="onOrderingDrug($event)"
    (cancelForm)="onCancel()"
    (formUpdate)="onFormUpdate($event)"
  >
  </app-drug-order-form>

  <div *ngIf="loadingMetadataError" class="text-center text-danger">
    {{ loadingMetadataError }}
  </div>
</div>
